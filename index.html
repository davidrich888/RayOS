<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>RayOS V11.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Inter:wght@400;500;600&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">‚ò∞</button>
    <div class="sidebar-overlay" onclick="toggleMobileMenu()"></div>
    
    <nav class="sidebar">
        <div class="logo"><div class="logo-text">RayOS</div></div>
        <div class="nav-item active" data-section="dashboard"><span class="nav-icon">‚óâ</span><span>Dashboard</span></div>
        <div class="nav-item" data-section="daily"><span class="nav-icon">‚úì</span><span>Daily</span></div>
        <div class="nav-item" data-section="physic"><span class="nav-icon">ü•∑</span><span>Physic</span></div>
        <div class="nav-item" data-section="wealth"><span class="nav-icon">$</span><span>Wealth</span></div>
        <div class="nav-item" data-section="trading"><span class="nav-icon">üìà</span><span>Trading</span></div>
        <div class="nav-item" data-section="business"><span class="nav-icon">üìä</span><span>Business</span></div>
        <div class="nav-item" data-section="ideas"><span class="nav-icon">üí°</span><span>Ideas</span></div>
        <div class="nav-item" data-section="information"><span class="nav-icon">üìñ</span><span>Information</span></div>
    </nav>
    
    <main class="main">
        <!-- DASHBOARD -->
        <section class="section active" id="dashboard">
            <div class="header">
                <div class="page-title">Dashboard</div>
                <div class="header-actions">
                    <button class="btn" onclick="showModal('settings-modal')">‚öôÔ∏è Settings</button>
                </div>
            </div>

            <div class="moodboard-wrapper">
                <div class="moodboard" id="moodboard-grid"></div>
                <div class="moodboard-center">
                    <div class="moodboard-title">VISION</div>
                    <div class="moodboard-sub">Build The Life You Want</div>
                </div>
                <button class="moodboard-refresh" onclick="refreshMoodboard()" title="Shuffle images">üîÄ Shuffle</button>
                <div class="moodboard-toolbar" style="position:absolute;top:12px;left:12px;z-index:15;display:flex;gap:6px;align-items:center;">
                    <span id="moodboard-count" style="background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.5);padding:4px 10px;font-size:10px;backdrop-filter:blur(4px);">üñºÔ∏è --</span>
                    <button class="moodboard-refresh" style="position:static;" onclick="syncMoodboardFromDrive()" title="Sync from Google Drive">üì∑ Sync</button>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box" onclick="go('daily')"><div class="stat-value" id="stat-streak">0</div><div class="stat-label">Streak</div></div>
                <div class="stat-box" onclick="go('physic')"><div class="stat-value" id="stat-bodyfat">--</div><div class="stat-label">Body Fat</div></div>
                <div class="stat-box" onclick="go('wealth')"><div class="stat-value" id="stat-wealth">--</div><div class="stat-label">Total Assets</div></div>
                <div class="stat-box" onclick="go('business')"><div class="stat-value" id="stat-mrr">$0</div><div class="stat-label">MRR</div></div>
                <div class="stat-box" onclick="go('ideas')"><div class="stat-value" id="stat-ideas">0</div><div class="stat-label">Ideas</div></div>
                <div class="stat-box" onclick="go('information')"><div class="stat-value" id="stat-learning">0</div><div class="stat-label">Learning</div></div>
            </div>

            <div class="content">
                <div class="section-label">Quick Access</div>
                <div class="cards">
                    <div class="card" onclick="go('physic')"><div class="card-header"><span class="card-icon">ü•∑</span><span class="card-badge">TRACK</span></div><div class="card-title">Physic</div><div class="card-desc">È´îÈáç„ÉªÈ´îËÑÇ„ÉªÈÄ≤Â∫¶</div></div>
                    <div class="card" onclick="go('wealth')"><div class="card-header"><span class="card-icon">$</span><span class="card-badge">TRACK</span></div><div class="card-title">Wealth</div><div class="card-desc">Ë≥áÁî¢„ÉªÊ∂àË≤ª„ÉªÁõÆÊ®ô</div></div>
                    <div class="card" onclick="go('business')"><div class="card-header"><span class="card-icon">üìä</span><span class="card-badge">GROW</span></div><div class="card-title">Business</div><div class="card-desc">Skool„ÉªMRR„ÉªMembers</div></div>
                    <div class="card" onclick="go('ideas')"><div class="card-header"><span class="card-icon">üí°</span><span class="card-badge">CAPTURE</span></div><div class="card-title">Ideas</div><div class="card-desc">ÈùàÊÑü„ÉªÈªûÂ≠ê„ÉªË®àÂäÉ</div></div>
                    <div class="card" onclick="go('information')"><div class="card-header"><span class="card-icon">üìñ</span><span class="card-badge">LEARN</span></div><div class="card-title">Information</div><div class="card-desc">YouTube Lab</div></div>
                </div>
            </div>
        </section>

        <!-- WEALTH -->
        <section class="section" id="wealth">
            <div class="header">
                <div class="page-title">Wealth</div>
                <div class="header-actions">
                    <span class="sync-dot off" id="wealth-sync-dot"></span>
                    <button class="btn" onclick="syncWealthFromNotion()">Sync Notion</button>
                    <button class="btn" onclick="go('dashboard')">‚Üê Back</button>
                    <button class="btn" onclick="syncAccountsFromNotion();showModal('account-modal')">Accounts</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/127c65e93b7c4008b34c86c285295387','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="wealth-quote-goal" style="display:grid;grid-template-columns:2fr 1fr;gap:16px;">
                            <div class="quote-box animate-fade">
                                <div class="quote-text" id="wealth-quote-text">"Wealth is the ability to fully experience life."</div>
                                <div class="quote-author" id="wealth-quote-author">‚Äî Henry David Thoreau</div>
                                <button class="btn btn-small" style="position:absolute;top:12px;right:12px;opacity:0.5;" onclick="editQuote()">Edit</button>
                            </div>
                            <div class="goal-card animate-fade" style="animation-delay:0.1s;">
                                <div class="goal-header"><span class="goal-label">2026 TARGET</span><button class="btn btn-small" onclick="editGoal()">Edit</button></div>
                                <div class="goal-value"><span id="goal-current">--</span> / <span id="goal-target">6,500,000</span></div>
                                <div class="goal-progress"><div class="goal-bar" id="goal-bar" style="width:0%"></div></div>
                                <div class="goal-info"><span id="goal-pct">0%</span><span id="goal-remain">ÈÇÑÂ∑Æ --</span></div>
                            </div>
                        </div>
                        
                        <div class="summary-grid animate-fade" style="animation-delay:0.15s;">
                            <div class="summary-item"><div class="summary-label">Total Assets</div><div class="summary-value accent" id="display-total">--</div></div>
                            <div class="summary-item"><div class="summary-label">Monthly</div><div class="summary-value" id="display-monthly">--</div></div>
                            <div class="summary-item"><div class="summary-label">Yearly</div><div class="summary-value" id="display-yearly">--</div></div>
                            <div class="summary-item"><div class="summary-label">Last Update</div><div class="summary-value" id="display-lastdate" style="font-size:16px;">--</div></div>
                        </div>
                        
                        <div class="chart-container animate-fade" style="animation-delay:0.2s;">
                            <div class="chart-header">
                                <div class="chart-title">Trend</div>
                                <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
                                    <div class="chart-toggle">
                                        <button class="chart-toggle-btn active" onclick="setWealthMode('trend',this)">Trend</button>
                                        <button class="chart-toggle-btn" onclick="setWealthMode('growth',this)">Growth %</button>
                                    </div>
                                    <div class="chart-toggle">
                                        <button class="chart-toggle-btn" onclick="setWealthChartStyle('line',this)">üìà Line</button>
                                        <button class="chart-toggle-btn active" onclick="setWealthChartStyle('bar',this)">üìä Bar</button>
                                        <button class="chart-toggle-btn" onclick="setWealthChartStyle('both',this)">Both</button>
                                    </div>
                                    <div class="chart-tabs">
                                        <button class="chart-tab active" onclick="setWealthChart('total',this)">Total Assets</button>
                                        <button class="chart-tab" onclick="setWealthChart('reserve',this)">ÂÇôÁî®Èáë</button>
                                        <button class="chart-tab" onclick="setWealthChart('savings',this)">Ê¥ªÊúüÂ≠òÊ¨æ</button>
                                        <button class="chart-tab" onclick="setWealthChart('stocks',this)">ËÇ°Á•®/ETF</button>
                                        <button class="chart-tab" onclick="setWealthChart('crypto',this)">Âä†ÂØÜË≤®Âπ£</button>
                                        <button class="chart-tab" onclick="setWealthChart('forex',this)">Â§ñÂπ£Â≠òÊ¨æ</button>
                                        <button class="chart-tab" onclick="setWealthChart('debt',this)">ÂÇµÂãô</button>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="wealthChart"></canvas></div>
                        </div>
                        
                        <div class="tabs">
                            <div class="tab active" onclick="setWealthTab('snapshot',this)">üìä Monthly Snapshot</div>
                            <div class="tab" onclick="setWealthTab('expense',this)">üí≥ Expense Analysis</div>
                        </div>
                        <div id="tab-snapshot">
                            <div style="text-align:center;margin-bottom:20px;">
                                <button class="btn btn-accent" onclick="toggleWealthForm()" id="wealth-form-toggle">üìù New Snapshot</button>
                            </div>
                            <div id="wealth-form" style="display:none;"></div>
                        </div>
                        <div id="tab-expense" style="display:none;">
                            <div class="form-section">
                                <div class="form-title">üì§ Import Credit Card Statement</div>
                                <textarea class="form-input" id="expense-paste" rows="3" placeholder="Paste CSV: date,description,amount" style="width:100%;"></textarea>
                                <div class="form-actions"><button class="btn btn-accent" onclick="analyzeExpenses()">Analyze</button></div>
                            </div>
                            <div id="expense-result" style="display:none;"></div>
                        </div>
                    </div>
                    <div class="wealth-sidebar">
                        <div class="ai-panel">
                            <div class="ai-header"><div class="ai-icon">üéØ</div><div class="ai-title">AI Wealth Coach</div><span class="ai-model-badge"></span></div>
                            <div class="ai-content"><div class="ai-suggestion" id="wealth-ai-suggestion">Loading...</div></div>
                            <div class="ai-chat">
                                <div class="ai-input-wrap">
                                    <input type="text" class="ai-input" id="wealth-ai-input" placeholder="Ask about your wealth...">
                                    <button class="ai-send" onclick="askWealthAI()">‚Üí</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TRADING -->
        <section class="section" id="trading">
            <div class="header">
                <div class="page-title">Trading</div>
                <div class="header-actions"><button class="btn" onclick="go('dashboard')">‚Üê Back</button></div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="tabs">
                            <div class="tab active" onclick="setTradingTab('algo',this)">ü§ñ Á®ãÂºè‰∫§Êòì</div>
                            <div class="tab" onclick="setTradingTab('propfirm',this)">üè¶ Prop Firm</div>
                        </div>
                        <div id="tab-algo">
                            <div class="summary-grid" style="margin-bottom:20px;">
                                <div class="summary-item"><div class="summary-label">Á¥ØÁ©çÂ†±ÈÖ¨Áéá</div><div class="summary-value accent" id="algo-cumret">43.16%</div></div>
                                <div class="summary-item"><div class="summary-label">Âπ¥ÂåñÂ†±ÈÖ¨Áéá</div><div class="summary-value" id="algo-annual">58.83%</div></div>
                                <div class="summary-item"><div class="summary-label">MDD</div><div class="summary-value negative" id="algo-mdd">26.01%</div></div>
                                <div class="summary-item"><div class="summary-label">Êó•ÂãùÁéá</div><div class="summary-value" id="algo-winrate">51.54%</div></div>
                            </div>
                            <div class="chart-container" style="margin-bottom:20px;">
                                <div class="chart-header"><div class="chart-title">Daily Cumulative Return (%)</div></div>
                                <div class="chart-wrapper"><canvas id="algoChart"></canvas></div>
                            </div>
                            <div class="form-section" style="margin-bottom:20px;">
                                <div class="form-title">üìä Monthly Returns</div>
                                <div style="overflow-x:auto;">
                                    <table class="monthly-table" id="monthly-returns-table">
                                        <thead><tr><th>Year</th><th>Jan</th><th>Feb</th><th>Mar</th><th>Apr</th><th>May</th><th>Jun</th><th>Jul</th><th>Aug</th><th>Sep</th><th>Oct</th><th>Nov</th><th>Dec</th><th>YTD</th></tr></thead>
                                        <tbody id="monthly-returns-body"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="form-section">
                                <div class="form-title">üìù Record Daily Equity</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="algo-date"></div>
                                    <div class="form-group"><label class="form-label">Ê¨äÁõäÊï∏</label><input type="number" class="form-input" id="algo-equity" placeholder="1,435,231"></div>
                                    <div class="form-group"><label class="form-label">Êó•Â†±ÈÖ¨ %</label><input type="number" step="0.01" class="form-input" id="algo-daily-ret" placeholder="3.09"></div>
                                </div>
                                <div class="form-actions"><button class="btn btn-accent" onclick="saveAlgoEquity()">Save</button></div>
                            </div>
                        </div>
                        <div id="tab-propfirm" style="display:none;">
                            <div class="summary-grid" style="margin-bottom:20px;">
                                <div class="summary-item"><div class="summary-label">Total Challenge Fee</div><div class="summary-value negative" id="prop-fee">$38,918</div></div>
                                <div class="summary-item"><div class="summary-label">Total Payout</div><div class="summary-value positive" id="prop-payout">$64,043</div></div>
                                <div class="summary-item"><div class="summary-label">Net Profit</div><div class="summary-value accent" id="prop-net">$29,648</div></div>
                                <div class="summary-item"><div class="summary-label">Pass Rate</div><div class="summary-value" id="prop-passrate">25%</div></div>
                            </div>
                            <div style="display:flex;gap:8px;margin-bottom:20px;">
                                <button class="btn" onclick="window.open('https://www.canva.com','_blank')">üìù Canva Notes</button>
                                <button class="btn" onclick="window.open('https://app.tradezella.com','_blank')">üìà TradeZella</button>
                            </div>
                            <div class="section-label">Active Accounts</div>
                            <div id="prop-challenges" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px;"></div>
                            <div class="form-section">
                                <div class="form-title">üìù Add Record</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Firm</label><select class="form-input" id="prop-firm"><option value="FTMO">FTMO</option><option value="TopStep">TopStep</option><option value="Tradeify">Tradeify</option><option value="Other">Other</option></select></div>
                                    <div class="form-group"><label class="form-label">Challenge Fee</label><input type="number" class="form-input" id="prop-challenge-fee" placeholder="875"></div>
                                    <div class="form-group"><label class="form-label">Payout</label><input type="number" class="form-input" id="prop-payout-amount" placeholder="0"></div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="prop-record-date"></div>
                                    <div class="form-group"><label class="form-label">Status</label><select class="form-input" id="prop-status"><option value="Challenge">Challenge</option><option value="Funded">Funded</option><option value="Failed">Failed</option><option value="Payout">Payout</option></select></div>
                                </div>
                                <div class="form-actions"><button class="btn btn-accent" onclick="savePropRecord()">Add</button></div>
                            </div>
                        </div>
                    </div>
                    <div class="wealth-sidebar">
                        <div class="ai-panel">
                            <div class="ai-header"><div class="ai-icon">üìà</div><div class="ai-title">AI Trading Coach</div><span class="ai-model-badge"></span></div>
                            <div class="ai-content"><div class="ai-suggestion" id="trading-ai-suggestion">Loading...</div></div>
                            <div class="ai-chat">
                                <div class="ai-input-wrap">
                                    <input type="text" class="ai-input" id="trading-ai-input" placeholder="Ask about your trading...">
                                    <button class="ai-send" onclick="askTradingAI()">‚Üí</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- BUSINESS -->
        <section class="section" id="business">
            <div class="header">
                <div class="page-title">Business</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">‚Üê Back</button>
                    <button class="btn" onclick="showModal('business-modal')">+ Add Business</button>
                </div>
            </div>
            <div class="content">
                <div class="business-selector" id="business-selector">
                    <div class="business-chip active" data-biz="skool-free" onclick="selectBusiness('skool-free',this)">üéì Skool Free</div>
                    <div class="business-chip" data-biz="skool-paid" onclick="selectBusiness('skool-paid',this)">üíé Skool Paid</div>
                    <div class="business-chip" data-biz="youtube" onclick="selectBusiness('youtube',this)">üì∫ YouTube</div>
                </div>
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="business-stats">
                            <div class="business-stat"><div class="business-stat-value" id="biz-members">0</div><div class="business-stat-label">Members</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-mrr">$0</div><div class="business-stat-label">MRR</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-growth">0%</div><div class="business-stat-label">Growth</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-ltv">$0</div><div class="business-stat-label">LTV</div></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title" id="biz-chart-title">Growth</div>
                                <div class="chart-tabs">
                                    <button class="chart-tab active" onclick="setBizChart('members',this)">Members</button>
                                    <button class="chart-tab" onclick="setBizChart('revenue',this)">Revenue</button>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="bizChart"></canvas></div>
                        </div>
                        <div class="form-section">
                            <div class="form-title">üìù Update Metrics</div>
                            <div class="form-row">
                                <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="biz-date"></div>
                                <div class="form-group"><label class="form-label">Members</label><input type="number" class="form-input" id="biz-members-input" placeholder="0"></div>
                                <div class="form-group"><label class="form-label">Revenue (USD)</label><input type="number" class="form-input" id="biz-revenue-input" placeholder="0"></div>
                            </div>
                            <div class="form-actions"><button class="btn btn-accent" onclick="saveBizMetrics()">Save</button></div>
                        </div>
                    </div>
                    <div class="wealth-sidebar">
                        <div class="ai-panel">
                            <div class="ai-header"><div class="ai-icon">üìà</div><div class="ai-title">AI Business Coach</div><span class="ai-model-badge"></span></div>
                            <div class="ai-content"><div class="ai-suggestion" id="biz-ai-suggestion">Select a business to see AI recommendations.</div></div>
                            <div class="ai-chat">
                                <div class="ai-input-wrap">
                                    <input type="text" class="ai-input" id="biz-ai-input" placeholder="Ask about your business...">
                                    <button class="ai-send" onclick="askBizAI()">‚Üí</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHYSIC -->
        <section class="section" id="physic">
            <div class="header">
                <div class="page-title">Physic</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">&#8592; Back</button>
                    <span class="sync-dot off" id="body-sync-dot"></span>
                    <button class="btn" onclick="syncBodyFromNotion()">&#128260; Sync Notion</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/f481a3da00de4d9391d293a88cf1c9c1','_blank')">Notion</button>
                </div>
            </div>
            <!-- Stats Row -->
            <div class="stats-row physic-stats-row" style="grid-template-columns:repeat(5,1fr);">
                <div class="stat-box"><div class="stat-value" id="body-stat-weight">--</div><div class="stat-label">Weight (kg)</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-fat">--</div><div class="stat-label">Body Fat %</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-muscle">--</div><div class="stat-label">Muscle (kg)</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-bmi">--</div><div class="stat-label">BMI</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-change">--</div><div class="stat-label">Fat Change</div></div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="physic-layout" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                            <div class="goal-card">
                                <div class="goal-header"><span class="goal-label">Body Fat Target</span><button class="btn btn-small" onclick="editPhysicGoal()">Edit</button></div>
                                <div class="goal-value"><span id="physic-current">19.2</span>% &#8594; <span id="physic-target">15</span>%</div>
                                <div class="goal-progress"><div class="goal-bar" id="physic-bar" style="width:0%"></div></div>
                                <div class="goal-info"><span id="physic-pct">0%</span><span id="physic-remain"></span></div>
                            </div>
                            <div class="form-section" style="margin:0;">
                                <div class="form-title">&#128221; Record</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="body-date"></div>
                                    <div class="form-group"><label class="form-label">Weight (kg)</label><input type="number" step="0.1" class="form-input" id="body-weight" placeholder="79.8"></div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Muscle (kg)</label><input type="number" step="0.1" class="form-input" id="body-muscle" placeholder="37.0"></div>
                                    <div class="form-group"><label class="form-label">Fat %</label><input type="number" step="0.1" class="form-input" id="body-fatpct" placeholder="19.2"></div>
                                </div>
                                <div class="form-group"><label class="form-label">Notes</label><input type="text" class="form-input" id="body-notes" placeholder="e.g. InBody test"></div>
                                <div class="form-actions" style="margin-top:8px;"><button class="btn btn-accent" onclick="saveBodyData()">Save &amp; Sync</button></div>
                            </div>
                        </div>
                        <!-- Before / After Photo -->
                        <div class="form-section">
                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                                <div class="form-title" style="margin:0;">&#128247; Before / After Comparison</div>
                                <div style="display:flex;gap:6px;align-items:center;">
                                    <span id="body-photo-count" style="font-size:10px;color:var(--text-dim);">--</span>
                                    <button class="btn btn-small" onclick="syncBodyPhotosFromDrive()">üì∑ Sync Drive</button>
                                </div>
                            </div>
                            <div class="physic-layout" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:12px;">
                                <div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                        <span style="font-size:10px;font-weight:700;color:var(--text-dim);letter-spacing:1px;">BEFORE</span>
                                        <select class="form-input" id="photo-before-select" onchange="photoIdx.before=0;updatePhotoComparison()" style="padding:4px 8px;font-size:11px;max-width:150px;"></select>
                                    </div>
                                    <div id="photo-before-frame" style="aspect-ratio:3/4;background:var(--bg-input);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;" onclick="cyclePhoto('before',1)">
                                        <span style="color:var(--text-muted);font-size:12px;">No photo</span>
                                    </div>
                                    <div id="photo-before-thumbs" style="display:flex;gap:4px;margin-top:6px;justify-content:center;"></div>
                                    <div id="photo-before-stats" style="text-align:center;margin-top:4px;font-size:11px;color:var(--text-dim);"></div>
                                </div>
                                <div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                        <span style="font-size:10px;font-weight:700;color:var(--text-dim);letter-spacing:1px;">AFTER</span>
                                        <select class="form-input" id="photo-after-select" onchange="photoIdx.after=0;updatePhotoComparison()" style="padding:4px 8px;font-size:11px;max-width:150px;"></select>
                                    </div>
                                    <div id="photo-after-frame" style="aspect-ratio:3/4;background:var(--bg-input);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;" onclick="cyclePhoto('after',1)">
                                        <span style="color:var(--text-muted);font-size:12px;">No photo</span>
                                    </div>
                                    <div id="photo-after-thumbs" style="display:flex;gap:4px;margin-top:6px;justify-content:center;"></div>
                                    <div id="photo-after-stats" style="text-align:center;margin-top:4px;font-size:11px;color:var(--text-dim);"></div>
                                </div>
                            </div>
                            <div id="photo-delta" style="display:none;background:var(--bg-input);border:1px solid var(--border);padding:12px;text-align:center;">
                                <div style="font-size:10px;color:var(--text-dim);letter-spacing:1px;margin-bottom:4px;">PROGRESS</div>
                                <div id="photo-delta-text" style="font-size:14px;font-weight:600;"></div>
                            </div>
                            <div style="margin-top:12px;padding:10px;background:var(--bg-input);border:1px solid var(--border);font-size:11px;color:var(--text-dim);text-align:center;">
                                üìÅ Google Drive ‚Üí RayOS Moodboard ‚Üí <strong>Body Progress</strong> ‚Üí <strong>YYYYMMDD</strong> Ë≥áÊñôÂ§æ
                            </div>
                        </div>
                        <!-- Chart -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Trend</div>
                                <div class="chart-tabs">
                                    <button class="chart-tab active" onclick="setBodyChart('fat',this)">Body Fat</button>
                                    <button class="chart-tab" onclick="setBodyChart('weight',this)">Weight</button>
                                    <button class="chart-tab" onclick="setBodyChart('muscle',this)">Muscle</button>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="bodyChart"></canvas></div>
                        </div>
                        <!-- History Table -->
                        <div class="form-section">
                            <div class="form-title">&#128202; History</div>
                            <div style="max-height:360px;overflow-y:auto;">
                                <table class="monthly-table">
                                    <thead><tr><th>Date</th><th>Weight</th><th>Fat %</th><th>Muscle</th><th>BMI</th><th>Notes</th><th></th></tr></thead>
                                    <tbody id="body-history-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- AI Coach Sidebar -->
                    <div class="wealth-sidebar">
                        <div class="ai-panel">
                            <div class="ai-header"><div class="ai-icon">&#127947;</div><div class="ai-title">AI Body Coach</div><span class="ai-model-badge"></span></div>
                            <div class="ai-content"><div class="ai-suggestion" id="body-ai-suggestion">Loading...</div></div>
                            <div class="ai-chat">
                                <div class="ai-input-wrap">
                                    <input type="text" class="ai-input" id="body-ai-input" placeholder="Ask about your physique...">
                                    <button class="ai-send" onclick="askBodyAI()">&#8594;</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-section" style="margin:0;">
                            <div class="form-title" style="font-size:13px;">&#128170; Summary</div>
                            <div style="display:grid;gap:8px;font-size:12px;">
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Total Records</span><span id="body-total-records">0</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">First Record</span><span id="body-first-date">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Latest Record</span><span id="body-latest-date">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Weight Change</span><span id="body-weight-change">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Fat % Change</span><span id="body-fat-change">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Muscle Change</span><span id="body-muscle-change">--</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- DAILY -->
        <section class="section" id="daily">
            <div class="header">
                <div class="page-title">Daily</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">‚Üê Back</button>
                    <span class="sync-dot off" id="sync-dot"></span><button class="btn" onclick="syncDailyFromNotionDirect()">üîÑ Sync Notion</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/58da82d689ed42029274234183f77bb6','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="quote-box" style="margin-bottom:20px;text-align:center;">
                    <div class="quote-text">"If you're under $1,000,000 per year, basically everyone on earth doesn't know you exist.<br><br>4hrs Promotion„ÄÅ4hrs Delivery„ÄÅ4hrs Building.<br><strong style="font-size:20px;">Promote. Deliver. Build.</strong>"</div>
                    <div class="quote-author">‚Äî Alex Hormozi</div>
                </div>
                
                <!-- ‰∏âÊ¨ÑÁ≠âÂØ¨Á≠âÈ´ò -->
                <div class="daily-grid">
                    <!-- Â∑¶ÈÇä: Today's Progress + Daily Habits -->
                    <div class="daily-column">
                        <div class="goal-card" style="margin-bottom:12px;">
                            <div class="goal-header"><span class="goal-label">Today's Progress</span><span id="daily-date" style="color:var(--text-dim);font-size:11px;"></span></div>
                            <div class="goal-value"><span id="daily-done">0</span> / <span id="daily-total">6</span></div>
                            <div class="goal-progress"><div class="goal-bar" id="daily-bar" style="width:0%"></div></div>
                        </div>
                        <div class="form-section" style="padding:16px;flex:1;">
                            <div class="form-title" style="font-size:14px;">‚úì Daily Habits</div>
                            <div id="habits-grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="trading" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">üìà</span><span class="habit-name" style="font-size:12px;">Trading</span><span class="habit-time">4Â∞èÊôÇ</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="advertise" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">üì£</span><span class="habit-name" style="font-size:12px;">Advertise</span><span class="habit-time">2Â∞èÊôÇ</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="deliver" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">üì¶</span><span class="habit-name" style="font-size:12px;">Deliver</span><span class="habit-time">2Â∞èÊôÇ</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="gym" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">üí™</span><span class="habit-name" style="font-size:12px;">Gym</span><span class="habit-time">2Â∞èÊôÇ</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="fatloss" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ü•ó</span><span class="habit-name" style="font-size:12px;">Fat Loss</span><span class="habit-time">2Â∞èÊôÇ</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="ai" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ü§ñ</span><span class="habit-name" style="font-size:12px;">AI</span><span class="habit-time">2Â∞èÊôÇ</span></label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ‰∏≠Èñì: Recent Days (with sticky header) -->
                    <div class="daily-column">
                        <div class="form-section" style="padding:16px;height:100%;display:flex;flex-direction:column;">
                            <div class="form-title" style="font-size:14px;">üìä Recent Days</div>
                            <div class="daily-history-wrapper" style="flex:1;">
                                <table id="daily-history-table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>üìà</th>
                                            <th>üì£</th>
                                            <th>üì¶</th>
                                            <th>üí™</th>
                                            <th>ü•ó</th>
                                            <th>ü§ñ</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="daily-history-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Âè≥ÈÇä: Google Calendar -->
                    <div class="daily-column">
                        <div class="form-section" style="padding:12px;height:100%;display:flex;flex-direction:column;">
                            <div class="form-title" style="font-size:14px;">üìÖ Calendar</div>
                            <iframe src="https://calendar.google.com/calendar/embed?src=david86726%40gmail.com&showTitle=0&showNav=0&showPrint=0&showTabs=0&showCalendars=0&showTz=0&bgcolor=%23000000&ctz=Asia%2FTaipei&mode=MONTH" style="border:none;width:100%;flex:1;min-height:400px;filter:invert(0.9) hue-rotate(180deg);"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- IDEAS -->
        <section class="section" id="ideas">
            <div class="header">
                <div class="page-title">Ideas</div>
                <div class="header-actions">
                    <span class="sync-dot off" id="ideas-sync-dot"></span>
                    <button class="btn" onclick="syncIdeasFromNotion()">Sync Notion</button>
                    <button class="btn" onclick="go('dashboard')">‚Üê Back</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/3d416eb92c484ad3bff54919c3ea43fd','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="form-section">
                    <div class="form-title">Quick Capture</div>
                    <div class="form-row">
                        <div class="form-group" style="flex:2;"><label class="form-label">Idea</label><input type="text" class="form-input" id="idea-text" placeholder="Type your idea..." onkeypress="if(event.key==='Enter')saveIdea()"></div>
                        <div class="form-group"><label class="form-label">Type</label><select class="form-input" id="idea-type"><option value="üí∞ Ë≥£Èå¢ÈªûÂ≠ê">üí∞ Ë≥£Èå¢ÈªûÂ≠ê</option><option value="üìπ ÂΩ±ÁâáÈªûÂ≠ê">üìπ ÂΩ±ÁâáÈªûÂ≠ê</option><option value="üõ†Ô∏è Â∑•ÂÖ∑/Ëá™ÂãïÂåñ">üõ†Ô∏è Â∑•ÂÖ∑/Ëá™ÂãïÂåñ</option><option value="üìù ÂÖßÂÆπÈªûÂ≠ê">üìù ÂÖßÂÆπÈªûÂ≠ê</option><option value="üåü ‰∫∫ÁîüÁõÆÊ®ô">üåü ‰∫∫ÁîüÁõÆÊ®ô</option><option value="ü§î ÂÖ∂‰ªñ">ü§î ÂÖ∂‰ªñ</option></select></div>
                        <div class="form-group"><label class="form-label">Priority</label><select class="form-input" id="idea-priority"><option value="üî• È´ò">üî• È´ò</option><option value="‚≠ê ‰∏≠" selected>‚≠ê ‰∏≠</option><option value="üìå ‰Ωé">üìå ‰Ωé</option></select></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group" style="flex:1;"><label class="form-label">Notes</label><input type="text" class="form-input" id="idea-notes" placeholder="Optional notes..."></div>
                    </div>
                    <div class="form-actions"><button class="btn btn-accent" onclick="saveIdea()">Save</button></div>
                </div>
                <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center;">
                    <button class="btn ideas-filter-btn active" data-filter="all" onclick="setIdeasFilter('all')">All</button>
                    <button class="btn ideas-filter-btn" data-filter="new" onclick="setIdeasFilter('new')">üí° New</button>
                    <button class="btn ideas-filter-btn" data-filter="research" onclick="setIdeasFilter('research')">üîç Research</button>
                    <button class="btn ideas-filter-btn" data-filter="active" onclick="setIdeasFilter('active')">üöÄ Active</button>
                    <button class="btn ideas-filter-btn" data-filter="done" onclick="setIdeasFilter('done')">‚úÖ Done</button>
                    <div id="ideas-stats" style="margin-left:auto;font-size:12px;color:var(--text-muted);display:flex;gap:12px;"></div>
                </div>
                <div id="ideas-list"></div>
            </div>
        </section>

        <!-- INFORMATION -->
        <section class="section" id="information">
            <div class="header">
                <div class="page-title">Information</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">‚Üê Back</button>
                    <button class="btn" onclick="window.open('https://youtube-lab.vercel.app/','_blank')">Open in New Tab ‚Üó</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/76fb8600ae9649bcb6c475f75f0ec818','_blank')">Notion</button>
                </div>
            </div>
            <div class="content" style="padding:0;height:calc(100vh - 80px);">
                <iframe src="https://youtube-lab.vercel.app/" style="width:100%;height:100%;border:none;"></iframe>
            </div>
        </section>
    </main>

    <div class="toast" id="toast">Saved</div>

    <!-- MODALS -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal">
            <div class="modal-title">Settings</div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Notion API TokenÔºàÁõ¥Êé•ÂêåÊ≠•ÔºåÊé®Ëñ¶Ôºâ</label>
                <input type="password" class="form-input" id="notion-token" placeholder="ntn_xxxxx...">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">ÂèñÂæóÊñπÂºèÔºö<a href="https://www.notion.so/my-integrations" target="_blank" style="color:var(--accent);">notion.so/my-integrations</a> ‚Üí Âª∫Á´ã Integration ‚Üí Ë§áË£Ω Token ‚Üí Ë®òÂæóÂú®Ë≥áÊñôÂ∫´ÈÄ£Êé• Integration</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Notion ÂêåÊ≠•ÁãÄÊÖã</label>
                <div id="notion-direct-status" style="font-size:12px;color:var(--text-dim);padding:8px 0;">Êú™Ë®≠ÂÆö</div>
                <button class="btn btn-small" onclick="testNotionDirect()" style="margin-top:4px;">üîç Ê∏¨Ë©¶ Notion ÈÄ£Á∑ö</button>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">n8n Webhook URLÔºàÈÄ≤ÈöéÔºåÂèØÈÅ∏Ôºâ</label>
                <input type="text" class="form-input" id="n8n-webhook" placeholder="https://your-n8n.com/webhook/rayos-sync">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">Ëã•‰∏ç‰ΩøÁî® Notion TokenÔºåÂèØÁî® n8n ‰∏≠ËΩâ„ÄÇÊúâ Notion Token ÊôÇÊ≠§Ê¨ÑÂèØÁïôÁ©∫</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">n8n ÂêåÊ≠•ÁãÄÊÖã</label>
                <div id="worker-status" style="font-size:12px;color:var(--text-dim);padding:8px 0;">Êú™Ë®≠ÂÆö</div>
                <button class="btn btn-small" onclick="testN8nConnection()" style="margin-top:4px;">üîç Test n8n</button>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Anthropic API Key (Claude AI Coach)</label>
                <input type="password" class="form-input" id="anthropic-key" placeholder="sk-ant-...">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">ÂèñÂæóÊñπÂºèÔºö<a href="https://console.anthropic.com/settings/keys" target="_blank" style="color:var(--accent);">console.anthropic.com</a> ‚Üí API Keys</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">AI ModelÔºàÊ®°ÂûãÈÅ∏ÊìáÔºâ</label>
                <select class="form-input" id="ai-model">
                    <option value="claude-haiku-4-5-20251001">Haiku 4.5 ‚Äî ÊúÄÂø´„ÄÅÊúÄÁúÅ üí∞</option>
                    <option value="claude-sonnet-4-20250514" selected>Sonnet 4 ‚Äî ÂùáË°°Êé®Ëñ¶ ‚ö°</option>
                    <option value="claude-sonnet-4-5-20250514">Sonnet 4.5 ‚Äî Êõ¥Âº∑Êé®ÁêÜ üß†</option>
                </select>
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">Haiku ‚âà Sonnet ÁöÑ 1/10 ÂÉπÊ†ºÔºåÊó•Â∏∏ËøΩËπ§Âª∫Ë≠∞ÂæàÂ§†Áî®</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">üéØ Personal Profile & GoalsÔºàAI ÊúÉËÆÄÂèñÈÄôÊÆµ‰æÜ‰∫ÜËß£‰Ω†Ôºâ</label>
                <textarea class="form-input" id="ai-profile" rows="6" placeholder="ÁØÑ‰æãÔºö
ÊàëÊòØ RayÔºå28Ê≠≤Ôºå‰ΩèÂú®Âè∞‰∏≠„ÄÇ
2026 ÁõÆÊ®ôÔºö
- Ë≥áÁî¢ÈÅîÂà∞ 650 Ëê¨ TWD
- È´îËÑÇÈôçÂà∞ 15% ‰ª•‰∏ãÔºåËÇåËÇâÈáèÁ∂≠ÊåÅ 37kg+
- Á®ãÂºè‰∫§ÊòìÂπ¥ÂåñÂ†±ÈÖ¨ > 50%
- Skool Á§æÁæ§‰ªòË≤ªÊúÉÂì°ÈÅî 100 ‰∫∫
- ÊØèÂ§©Â†ÖÊåÅ 6 ÂÄãÁøíÊÖ£

ÊàëÁöÑÊåëÊà∞ÔºöÂÆπÊòìÂú®ÈÄ±Êú´È¨ÜÊáàÔºå‰∫§ÊòìÂÆπÊòìËøΩÈ´ò
ÊàëÂ∏åÊúõ AIÔºöÁõ¥Êé•„ÄÅ‰∏çË¶ÅÂÆ¢Â•ó„ÄÅÁî®Êï∏ÊìöË™™Ë©±"></textarea>
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">ÂØ´‰∏ã‰Ω†ÁöÑÁõÆÊ®ô„ÄÅÊåëÊà∞„ÄÅÂÅèÂ•Ω ‚Äî AI Coach ÊúÉÊ†πÊìöÈÄô‰∫õ + ‰Ω†ÁöÑÂØ¶ÈöõÊï∏ÊìöÁµ¶Âª∫Ë≠∞</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">Data</label><button class="btn btn-danger" onclick="resetData()" style="width:100%;margin-top:6px;">üîÑ Reset to Demo Data</button></div>
            <div style="border-top:1px solid var(--border);padding-top:16px;margin-bottom:16px;">
                <div class="form-title" style="font-size:14px;">üñºÔ∏è Moodboard ‚Äî Google Drive</div>
                <div class="form-group" style="margin-bottom:12px;">
                    <label class="form-label">Google Apps Script URL</label>
                    <input type="text" class="form-input" id="drive-script-url" placeholder="https://script.google.com/macros/s/xxx/exec">
                    <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">Ë≤º‰∏äÈÉ®ÁΩ≤Â•ΩÁöÑ Apps Script URLÔºåMoodboard ÊúÉËá™ÂãïÂæû Google Drive ÊäìÂúñ</div>
                </div>
                <details style="margin-bottom:12px;">
                    <summary style="font-size:11px;color:var(--accent);cursor:pointer;margin-bottom:8px;">üìñ Ë®≠ÂÆöÊïôÂ≠∏ÔºàÂè™ÈúÄÂÅö‰∏ÄÊ¨°Ôºâ</summary>
                    <div style="font-size:11px;color:var(--text-dim);line-height:1.8;padding:12px;background:var(--bg-input);border:1px solid var(--border);">
                        <strong>Step 1ÔºöÂª∫Á´ã Google Drive Ë≥áÊñôÂ§æ</strong><br>
                        Âª∫‰∏ÄÂÄãË≥áÊñôÂ§æÂè´ <code style="color:var(--accent);">RayOS Moodboard</code><br>
                        Ë£°Èù¢Âª∫Â≠êË≥áÊñôÂ§æÔºöCars, Fitness, Nature, Trading, Wealth, Food, Architecture, Lifestyle ...<br>
                        Áõ¥Êé•ÊääÊâãÊ©üÁÖßÁâá‰∏üÈÄ≤Â∞çÊáâË≥áÊñôÂ§æÂ∞±Â•ΩÔºÅ<br><br>
                        <strong>Step 2ÔºöÂàÜ‰∫´Ë≥áÊñôÂ§æ</strong><br>
                        Âè≥Èçµ‰∏ªË≥áÊñôÂ§æ ‚Üí ÂÖ±Áî® ‚Üí „ÄåÁü•ÈÅìÈÄ£ÁµêÁöÑ‰∫∫ÈÉΩËÉΩÊü•Áúã„Äç<br><br>
                        <strong>Step 3ÔºöÂª∫Á´ã Apps Script</strong><br>
                        Âéª <a href="https://script.google.com" target="_blank" style="color:var(--accent);">script.google.com</a> ‚Üí Êñ∞Âª∫Â∞àÊ°à<br>
                        Êää‰∏ãÈù¢ÁöÑÁ®ãÂºèÁ¢ºÂÖ®ÈÉ®Ë≤º‰∏äÂéªÔºàÂèñ‰ª£ÂéüÊú¨ÁöÑÔºâ<br><br>
                        <strong>Step 4ÔºöÈÉ®ÁΩ≤</strong><br>
                        ÈªûÂè≥‰∏ä„ÄåÈÉ®ÁΩ≤„Äç‚Üí„ÄåÊñ∞Â¢ûÈÉ®ÁΩ≤„Äç‚Üí È°ûÂûãÈÅ∏„ÄåÁ∂≤È†ÅÊáâÁî®Á®ãÂºè„Äç<br>
                        Âü∑Ë°åË∫´ÂàÜÔºö<code style="color:var(--accent);">Êàë</code>„ÄÄÂ≠òÂèñÊ¨äÈôêÔºö<code style="color:var(--accent);">ÊâÄÊúâ‰∫∫</code><br>
                        Ë§áË£ΩÁî¢ÁîüÁöÑ URL Ë≤ºÂà∞‰∏äÈù¢Ê¨Ñ‰Ωç<br><br>
                        <strong>Apps Script Á®ãÂºèÁ¢ºÔºö</strong><br>
                        <button class="btn btn-small" onclick="copyDriveScript()" style="margin:4px 0;">üìã Ë§áË£ΩÁ®ãÂºèÁ¢º</button>
                        <pre id="drive-script-code" style="font-size:10px;color:var(--text-dim);white-space:pre-wrap;margin-top:8px;padding:8px;background:var(--bg);border:1px solid var(--border);max-height:200px;overflow-y:auto;">function doGet(e) {
  var FOLDER_ID = 'YOUR_FOLDER_ID_HERE';
  var folder = DriveApp.getFolderById(FOLDER_ID);
  var images = [];
  var bodyProgress = {};  // { "2026-02-06": [url1, url2], ... }
  
  var subs = folder.getFolders();
  while (subs.hasNext()) {
    var sub = subs.next();
    var cat = sub.getName();
    
    // Body Progress: scan date subfolders
    if (cat === 'Body Progress') {
      var dateFolders = sub.getFolders();
      while (dateFolders.hasNext()) {
        var dateFolder = dateFolders.next();
        var dateKey = dateFolder.getName(); // e.g. "2026-02-06"
        bodyProgress[dateKey] = [];
        var bFiles = dateFolder.getFiles();
        while (bFiles.hasNext()) {
          var bf = bFiles.next();
          if (bf.getMimeType().indexOf('image') === 0) {
            bodyProgress[dateKey].push(
              'https://lh3.googleusercontent.com/d/' + bf.getId() + '=s1200'
            );
          }
        }
      }
      continue; // skip adding to moodboard
    }
    
    // Normal moodboard category
    var files = sub.getFiles();
    while (files.hasNext()) {
      var f = files.next();
      if (f.getMimeType().indexOf('image') === 0) {
        images.push({
          url: 'https://lh3.googleusercontent.com/d/' + f.getId() + '=s1200',
          category: cat,
          name: f.getName()
        });
      }
    }
  }
  
  var rootFiles = folder.getFiles();
  while (rootFiles.hasNext()) {
    var f = rootFiles.next();
    if (f.getMimeType().indexOf('image') === 0) {
      images.push({
        url: 'https://lh3.googleusercontent.com/d/' + f.getId() + '=s1200',
        category: 'Other',
        name: f.getName()
      });
    }
  }
  
  return ContentService
    .createTextOutput(JSON.stringify({
      images: images,
      bodyProgress: bodyProgress,
      count: images.length
    }))
    .setMimeType(ContentService.MimeType.JSON);
}</pre>
                    </div>
                </details>
                <div style="display:flex;gap:8px;align-items:center;">
                    <button class="btn btn-small" onclick="testDriveConnection()">üîç Ê∏¨Ë©¶ÈÄ£Á∑ö</button>
                    <button class="btn btn-small" onclick="syncMoodboardFromDrive()">üîÑ ÊâãÂãïÂêåÊ≠•</button>
                    <span id="drive-status" style="font-size:11px;color:var(--text-dim);">Êú™Ë®≠ÂÆö</span>
                </div>
            </div>
            <div class="form-actions"><button class="btn" onclick="hideModal('settings-modal')">Cancel</button><button class="btn btn-accent" onclick="saveSettings()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="account-modal">
        <div class="modal" style="max-width:600px;">
            <div class="modal-title">Manage Accounts</div>
            <div id="account-manager-list" style="max-height:300px;overflow-y:auto;margin-bottom:16px;"></div>
            <div class="form-section" style="margin:0;">
                <div class="form-title">Add New Account</div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Name</label><input type="text" class="form-input" id="new-account-name" placeholder="Account name"></div>
                    <div class="form-group"><label class="form-label">Platform</label><input type="text" class="form-input" id="new-account-platform" placeholder="Bank"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Category</label><select class="form-input" id="new-account-category"><option value="ÂÇôÁî®Èáë">üíµ ÂÇôÁî®Èáë</option><option value="Ê¥ªÊúüÂ≠òÊ¨æ">üè¶ Ê¥ªÊúüÂ≠òÊ¨æ</option><option value="ËÇ°Á•®ETF">üìà ËÇ°Á•®/ETF</option><option value="Âä†ÂØÜË≤®Âπ£">ü™ô Âä†ÂØÜË≤®Âπ£</option><option value="ÂÇµÂãô">üí≥ ÂÇµÂãô</option></select></div>
                    <div class="form-group"><label class="form-label">Currency</label><select class="form-input" id="new-account-currency"><option value="TWD">TWD</option><option value="USD">USD</option><option value="USDT">USDT</option></select></div>
                </div>
                <div class="form-actions"><button class="btn btn-accent" onclick="addAccount()">Add</button></div>
            </div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('account-modal')">Close</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="quote-modal">
        <div class="modal">
            <div class="modal-title">Edit Quote</div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Quote</label><textarea class="form-input" id="quote-text-input" rows="3"></textarea></div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">Author</label><input type="text" class="form-input" id="quote-author-input"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('quote-modal')">Cancel</button><button class="btn btn-accent" onclick="saveQuote()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="goal-modal">
        <div class="modal">
            <div class="modal-title">Edit Wealth Goal</div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">2026 Target (TWD)</label><input type="number" class="form-input" id="wealth-goal-input" placeholder="6500000"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('goal-modal')">Cancel</button><button class="btn btn-accent" onclick="saveGoal()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="physic-goal-modal">
        <div class="modal">
            <div class="modal-title">Edit Body Fat Goal</div>
            <div class="form-row">
                <div class="form-group"><label class="form-label">Start Fat %</label><input type="number" step="0.1" class="form-input" id="physic-start-input" placeholder="21"></div>
                <div class="form-group"><label class="form-label">Target Fat %</label><input type="number" step="0.1" class="form-input" id="physic-target-input" placeholder="15"></div>
            </div>
            <div class="form-group" style="margin-top:12px;"><label class="form-label">Height (cm) for BMI</label><input type="number" step="0.1" class="form-input" id="physic-height-input" placeholder="175"></div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('physic-goal-modal')">Cancel</button><button class="btn btn-accent" onclick="savePhysicGoal()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="photo-manager-modal">
        <div class="modal" style="max-width:600px;">
            <div class="modal-title">Manage Photos</div>
            <div id="photo-manager-list" style="max-height:400px;overflow-y:auto;"></div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('photo-manager-modal')">Close</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="business-modal">
        <div class="modal">
            <div class="modal-title">Add Business</div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Name</label><input type="text" class="form-input" id="new-biz-name" placeholder="Business name"></div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Icon</label><input type="text" class="form-input" id="new-biz-icon" placeholder="üè¢"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('business-modal')">Cancel</button><button class="btn btn-accent" onclick="addBusiness()">Add</button></div>
        </div>
    </div>


    <!-- JS Modules (order matters for variable dependencies) -->
    <script src="js/data.js"></script>
    <script src="js/config.js"></script>
    <script src="js/state.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/notion-sync.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/wealth.js"></script>
    <script src="js/ai-engine.js"></script>
    <script src="js/business.js"></script>
    <script src="js/trading.js"></script>
    <script src="js/physic.js"></script>
    <script src="js/daily.js"></script>
    <script src="js/ideas.js"></script>
    <script src="js/init.js"></script>
</body>
</html>
