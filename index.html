<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="RayOS">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/icons/icon-192.png">
    <title>RayOS V11.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@600;700&family=Inter:wght@400;500;600&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs@1.0.0/qrcode.min.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <button class="mobile-menu-btn" onclick="toggleMobileMenu()">â˜°</button>
    <div class="sidebar-overlay" onclick="toggleMobileMenu()"></div>
    
    <nav class="sidebar">
        <div class="logo"><div class="logo-text">RayOS</div></div>
        <div class="nav-item active" data-section="dashboard"><span class="nav-icon">â—‰</span><span>Dashboard</span></div>
        <div class="nav-item" data-section="daily"><span class="nav-icon">âœ“</span><span>Daily</span></div>
        <div class="nav-item" data-section="physic"><span class="nav-icon">ğŸ¥·</span><span>Physic</span></div>
        <div class="nav-item" data-section="wealth"><span class="nav-icon">$</span><span>Wealth</span></div>
        <div class="nav-item" data-section="trading"><span class="nav-icon">ğŸ“ˆ</span><span>Trading</span></div>
        <div class="nav-item" data-section="business"><span class="nav-icon">ğŸ“Š</span><span>Business</span></div>
        <div class="nav-item" data-section="ideas"><span class="nav-icon">ğŸ’¡</span><span>Ideas</span></div>
        <div class="nav-item" data-section="lifecoach"><span class="nav-icon">ğŸ§ </span><span>AI Coach</span></div>
        <div class="nav-item" data-section="information"><span class="nav-icon">ğŸ“–</span><span>Information</span></div>
    </nav>
    
    <main class="main">
        <!-- DASHBOARD -->
        <section class="section active" id="dashboard">
            <div class="header">
                <div class="page-title">Dashboard</div>
                <div class="header-actions">
                    <button class="btn" onclick="showModal('settings-modal')">âš™ï¸ Settings</button>
                </div>
            </div>

            <div class="moodboard-wrapper">
                <div class="moodboard" id="moodboard-grid"></div>
                <div class="moodboard-center">
                    <div class="moodboard-title">VISION</div>
                    <div class="moodboard-sub">Build The Life You Want</div>
                </div>
                <button class="moodboard-refresh" onclick="refreshMoodboard()" title="Shuffle images">ğŸ”€ Shuffle</button>
                <div class="moodboard-toolbar" style="position:absolute;top:12px;left:12px;z-index:15;display:flex;gap:6px;align-items:center;">
                    <span id="moodboard-count" style="background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.15);color:rgba(255,255,255,0.5);padding:4px 10px;font-size:10px;backdrop-filter:blur(4px);">ğŸ–¼ï¸ --</span>
                    <button class="moodboard-refresh" style="position:static;" onclick="syncMoodboardFromDrive()" title="Sync from Google Drive">ğŸ“· Sync</button>
                </div>
            </div>

            <div class="stats-row">
                <div class="stat-box" onclick="go('daily')"><div class="stat-value" id="stat-streak">0</div><div class="stat-label">Streak</div></div>
                <div class="stat-box" onclick="go('physic')"><div class="stat-value" id="stat-bodyfat">--</div><div class="stat-label">Body Fat</div></div>
                <div class="stat-box" onclick="go('wealth')"><div class="stat-value" id="stat-wealth">--</div><div class="stat-label">Total Assets</div></div>
                <div class="stat-box" onclick="go('business')"><div class="stat-value" id="stat-mrr">$0</div><div class="stat-label">MRR</div></div>
                <div class="stat-box" onclick="go('ideas')"><div class="stat-value" id="stat-ideas">0</div><div class="stat-label">Ideas</div></div>
                <div class="stat-box" onclick="go('information')"><div class="stat-value" id="stat-learning">0</div><div class="stat-label">Learning</div></div>
            </div>

            <div class="content">
                <div class="section-label">Quick Access</div>
                <div class="cards">
                    <div class="card" onclick="go('physic')"><div class="card-header"><span class="card-icon">ğŸ¥·</span><span class="card-badge">TRACK</span></div><div class="card-title">Physic</div><div class="card-desc">é«”é‡ãƒ»é«”è„‚ãƒ»é€²åº¦</div></div>
                    <div class="card" onclick="go('wealth')"><div class="card-header"><span class="card-icon">$</span><span class="card-badge">TRACK</span></div><div class="card-title">Wealth</div><div class="card-desc">è³‡ç”¢ãƒ»æ¶ˆè²»ãƒ»ç›®æ¨™</div></div>
                    <div class="card" onclick="go('business')"><div class="card-header"><span class="card-icon">ğŸ“Š</span><span class="card-badge">GROW</span></div><div class="card-title">Business</div><div class="card-desc">Skoolãƒ»MRRãƒ»Members</div></div>
                    <div class="card" onclick="go('ideas')"><div class="card-header"><span class="card-icon">ğŸ’¡</span><span class="card-badge">CAPTURE</span></div><div class="card-title">Ideas</div><div class="card-desc">éˆæ„Ÿãƒ»é»å­ãƒ»è¨ˆåŠƒ</div></div>
                    <div class="card" onclick="go('lifecoach')"><div class="card-header"><span class="card-icon">ğŸ§ </span><span class="card-badge">AI</span></div><div class="card-title">Life Coach</div><div class="card-desc">AI äººç”Ÿå°å¸«</div></div>
                    <div class="card" onclick="go('information')"><div class="card-header"><span class="card-icon">ğŸ“–</span><span class="card-badge">LEARN</span></div><div class="card-title">Information</div><div class="card-desc">YouTube Lab</div></div>
                </div>
            </div>
        </section>

        <!-- WEALTH -->
        <section class="section" id="wealth">
            <div class="header">
                <div class="page-title">Wealth</div>
                <div class="header-actions">
                    <span class="sync-dot off" id="wealth-sync-dot"></span>
                    <button class="btn" onclick="syncWealthFromNotion()">Sync Notion</button>
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <button class="btn" onclick="syncAccountsFromNotion();showModal('account-modal')">Accounts</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/127c65e93b7c4008b34c86c285295387','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="wealth-quote-goal" style="display:grid;grid-template-columns:2fr 1fr;gap:16px;">
                            <div class="quote-box animate-fade">
                                <div class="quote-text" id="wealth-quote-text">"Wealth is the ability to fully experience life."</div>
                                <div class="quote-author" id="wealth-quote-author">â€” Henry David Thoreau</div>
                                <button class="btn btn-small" style="position:absolute;top:12px;right:12px;opacity:0.5;" onclick="editQuote()">Edit</button>
                            </div>
                            <div class="goal-card animate-fade" style="animation-delay:0.1s;">
                                <div class="goal-header"><span class="goal-label">2026 TARGET</span><button class="btn btn-small" onclick="editGoal()">Edit</button></div>
                                <div class="goal-value"><span id="goal-current">--</span> / <span id="goal-target">6,500,000</span></div>
                                <div class="goal-progress"><div class="goal-bar" id="goal-bar" style="width:0%"></div></div>
                                <div class="goal-info"><span id="goal-pct">0%</span><span id="goal-remain">é‚„å·® --</span></div>
                            </div>
                        </div>
                        
                        <div class="summary-grid animate-fade" style="animation-delay:0.15s;">
                            <div class="summary-item"><div class="summary-label">Total Assets</div><div class="summary-value accent" id="display-total">--</div></div>
                            <div class="summary-item"><div class="summary-label">Monthly</div><div class="summary-value" id="display-monthly">--</div></div>
                            <div class="summary-item"><div class="summary-label">Yearly</div><div class="summary-value" id="display-yearly">--</div></div>
                            <div class="summary-item"><div class="summary-label">Last Update</div><div class="summary-value" id="display-lastdate" style="font-size:16px;">--</div></div>
                        </div>
                        
                        <div class="chart-container animate-fade" style="animation-delay:0.2s;">
                            <div class="chart-header">
                                <div class="chart-title">Trend</div>
                                <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap;">
                                    <div class="chart-toggle">
                                        <button class="chart-toggle-btn active" onclick="setWealthMode('trend',this)">Trend</button>
                                        <button class="chart-toggle-btn" onclick="setWealthMode('growth',this)">Growth %</button>
                                    </div>
                                    <div class="chart-toggle">
                                        <button class="chart-toggle-btn" onclick="setWealthChartStyle('line',this)">ğŸ“ˆ Line</button>
                                        <button class="chart-toggle-btn active" onclick="setWealthChartStyle('bar',this)">ğŸ“Š Bar</button>
                                        <button class="chart-toggle-btn" onclick="setWealthChartStyle('both',this)">Both</button>
                                    </div>
                                    <div class="chart-tabs">
                                        <button class="chart-tab active" onclick="setWealthChart('total',this)">Total Assets</button>
                                        <button class="chart-tab" onclick="setWealthChart('reserve',this)">å‚™ç”¨é‡‘</button>
                                        <button class="chart-tab" onclick="setWealthChart('savings',this)">æ´»æœŸå­˜æ¬¾</button>
                                        <button class="chart-tab" onclick="setWealthChart('stocks',this)">è‚¡ç¥¨/ETF</button>
                                        <button class="chart-tab" onclick="setWealthChart('crypto',this)">åŠ å¯†è²¨å¹£</button>
                                        <button class="chart-tab" onclick="setWealthChart('forex',this)">å¤–å¹£å­˜æ¬¾</button>
                                        <button class="chart-tab" onclick="setWealthChart('debt',this)">å‚µå‹™</button>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="wealthChart"></canvas></div>
                        </div>
                        
                        <div class="tabs">
                            <div class="tab active" onclick="setWealthTab('snapshot',this)">ğŸ“Š Monthly Snapshot</div>
                            <div class="tab" onclick="setWealthTab('expense',this)">ğŸ’³ Expense Analysis</div>
                        </div>
                        <div id="tab-snapshot">
                            <div style="text-align:center;margin-bottom:20px;">
                                <button class="btn btn-accent" onclick="toggleWealthForm()" id="wealth-form-toggle">ğŸ“ New Snapshot</button>
                            </div>
                            <div id="wealth-form" style="display:none;"></div>
                        </div>
                        <div id="tab-expense" style="display:none;">
                            <div class="form-section">
                                <div class="form-title">ğŸ“¤ Import Credit Card Statement</div>
                                <textarea class="form-input" id="expense-paste" rows="3" placeholder="Paste CSV: date,description,amount" style="width:100%;"></textarea>
                                <div class="form-actions"><button class="btn btn-accent" onclick="analyzeExpenses()">Analyze</button></div>
                            </div>
                            <div id="expense-result" style="display:none;"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- TRADING -->
        <section class="section" id="trading">
            <div class="header">
                <div class="page-title">Trading</div>
                <div class="header-actions"><button class="btn" onclick="go('dashboard')">â† Back</button></div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="tabs">
                            <div class="tab active" onclick="setTradingTab('algo',this)">ğŸ¤– ç¨‹å¼äº¤æ˜“</div>
                            <div class="tab" onclick="setTradingTab('propfirm',this)">ğŸ¦ Prop Firm</div>
                        </div>
                        <div id="tab-algo">
                            <div class="summary-grid" style="margin-bottom:20px;">
                                <div class="summary-item"><div class="summary-label">ç´¯ç©å ±é…¬ç‡</div><div class="summary-value accent" id="algo-cumret">43.16%</div></div>
                                <div class="summary-item"><div class="summary-label">å¹´åŒ–å ±é…¬ç‡</div><div class="summary-value" id="algo-annual">58.83%</div></div>
                                <div class="summary-item"><div class="summary-label">MDD</div><div class="summary-value negative" id="algo-mdd">26.01%</div></div>
                                <div class="summary-item"><div class="summary-label">æ—¥å‹ç‡</div><div class="summary-value" id="algo-winrate">51.54%</div></div>
                            </div>
                            <div class="chart-container" style="margin-bottom:20px;">
                                <div class="chart-header"><div class="chart-title">Daily Cumulative Return (%)</div></div>
                                <div class="chart-wrapper"><canvas id="algoChart"></canvas></div>
                            </div>
                            <div class="form-section" style="margin-bottom:20px;">
                                <div class="form-title">ğŸ“Š Monthly Returns</div>
                                <div style="overflow-x:auto;">
                                    <table class="monthly-table" id="monthly-returns-table">
                                        <thead><tr><th>Year</th><th>Jan</th><th>Feb</th><th>Mar</th><th>Apr</th><th>May</th><th>Jun</th><th>Jul</th><th>Aug</th><th>Sep</th><th>Oct</th><th>Nov</th><th>Dec</th><th>YTD</th></tr></thead>
                                        <tbody id="monthly-returns-body"></tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="form-section">
                                <div class="form-title">ğŸ“ Record Daily Equity</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="algo-date"></div>
                                    <div class="form-group"><label class="form-label">æ¬Šç›Šæ•¸</label><input type="number" class="form-input" id="algo-equity" placeholder="1,435,231"></div>
                                    <div class="form-group"><label class="form-label">æ—¥å ±é…¬ %</label><input type="number" step="0.01" class="form-input" id="algo-daily-ret" placeholder="3.09"></div>
                                </div>
                                <div class="form-actions"><button class="btn btn-accent" onclick="saveAlgoEquity()">Save</button></div>
                            </div>
                        </div>
                        <div id="tab-propfirm" style="display:none;">
                            <div class="summary-grid" style="margin-bottom:20px;">
                                <div class="summary-item"><div class="summary-label">Total Challenge Fee</div><div class="summary-value negative" id="prop-fee">$38,918</div></div>
                                <div class="summary-item"><div class="summary-label">Total Payout</div><div class="summary-value positive" id="prop-payout">$64,043</div></div>
                                <div class="summary-item"><div class="summary-label">Net Profit</div><div class="summary-value accent" id="prop-net">$29,648</div></div>
                                <div class="summary-item"><div class="summary-label">Pass Rate</div><div class="summary-value" id="prop-passrate">25%</div></div>
                            </div>
                            <div style="display:flex;gap:8px;margin-bottom:20px;">
                                <button class="btn" onclick="window.open('https://www.canva.com','_blank')">ğŸ“ Canva Notes</button>
                                <button class="btn" onclick="window.open('https://app.tradezella.com','_blank')">ğŸ“ˆ TradeZella</button>
                            </div>
                            <div class="section-label">Active Accounts</div>
                            <div id="prop-challenges" style="display:grid;grid-template-columns:repeat(2,1fr);gap:12px;margin-bottom:20px;"></div>
                            <div class="form-section">
                                <div class="form-title">ğŸ“ Add Record</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Firm</label><select class="form-input" id="prop-firm"><option value="FTMO">FTMO</option><option value="TopStep">TopStep</option><option value="Tradeify">Tradeify</option><option value="Other">Other</option></select></div>
                                    <div class="form-group"><label class="form-label">Challenge Fee</label><input type="number" class="form-input" id="prop-challenge-fee" placeholder="875"></div>
                                    <div class="form-group"><label class="form-label">Payout</label><input type="number" class="form-input" id="prop-payout-amount" placeholder="0"></div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="prop-record-date"></div>
                                    <div class="form-group"><label class="form-label">Status</label><select class="form-input" id="prop-status"><option value="Challenge">Challenge</option><option value="Funded">Funded</option><option value="Failed">Failed</option><option value="Payout">Payout</option></select></div>
                                </div>
                                <div class="form-actions"><button class="btn btn-accent" onclick="savePropRecord()">Add</button></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- BUSINESS -->
        <section class="section" id="business">
            <div class="header">
                <div class="page-title">Business</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <button class="btn" onclick="showModal('business-modal')">+ Add Business</button>
                </div>
            </div>
            <div class="content">
                <div class="business-selector" id="business-selector">
                    <div class="business-chip active" data-biz="skool-free" onclick="selectBusiness('skool-free',this)">ğŸ“ Skool Free</div>
                    <div class="business-chip" data-biz="skool-paid" onclick="selectBusiness('skool-paid',this)">ğŸ’ Skool Paid</div>
                    <div class="business-chip" data-biz="youtube" onclick="selectBusiness('youtube',this)">ğŸ“º YouTube</div>
                </div>
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="business-stats">
                            <div class="business-stat"><div class="business-stat-value" id="biz-members">0</div><div class="business-stat-label">Members</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-mrr">$0</div><div class="business-stat-label">MRR</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-growth">0%</div><div class="business-stat-label">Growth</div></div>
                            <div class="business-stat"><div class="business-stat-value" id="biz-ltv">$0</div><div class="business-stat-label">LTV</div></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title" id="biz-chart-title">Growth</div>
                                <div class="chart-tabs">
                                    <button class="chart-tab active" onclick="setBizChart('members',this)">Members</button>
                                    <button class="chart-tab" onclick="setBizChart('revenue',this)">Revenue</button>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="bizChart"></canvas></div>
                        </div>
                        <div class="form-section">
                            <div class="form-title">ğŸ“ Update Metrics</div>
                            <div class="form-row">
                                <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="biz-date"></div>
                                <div class="form-group"><label class="form-label">Members</label><input type="number" class="form-input" id="biz-members-input" placeholder="0"></div>
                                <div class="form-group"><label class="form-label">Revenue (USD)</label><input type="number" class="form-input" id="biz-revenue-input" placeholder="0"></div>
                            </div>
                            <div class="form-actions"><button class="btn btn-accent" onclick="saveBizMetrics()">Save</button></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- PHYSIC -->
        <section class="section" id="physic">
            <div class="header">
                <div class="page-title">Physic</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">&#8592; Back</button>
                    <span class="sync-dot off" id="body-sync-dot"></span>
                    <button class="btn" onclick="syncBodyFromNotion()">&#128260; Sync Notion</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/f481a3da00de4d9391d293a88cf1c9c1','_blank')">Notion</button>
                </div>
            </div>
            <!-- Stats Row -->
            <div class="stats-row physic-stats-row" style="grid-template-columns:repeat(5,1fr);">
                <div class="stat-box"><div class="stat-value" id="body-stat-weight">--</div><div class="stat-label">Weight (kg)</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-fat">--</div><div class="stat-label">Body Fat %</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-muscle">--</div><div class="stat-label">Muscle (kg)</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-bmi">--</div><div class="stat-label">BMI</div></div>
                <div class="stat-box"><div class="stat-value" id="body-stat-change">--</div><div class="stat-label">Fat Change</div></div>
            </div>
            <div class="content">
                <div class="wealth-layout">
                    <div class="wealth-main">
                        <div class="physic-layout" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;">
                            <div class="goal-card">
                                <div class="goal-header"><span class="goal-label">Body Fat Target</span><button class="btn btn-small" onclick="editPhysicGoal()">Edit</button></div>
                                <div class="goal-value"><span id="physic-current">19.2</span>% &#8594; <span id="physic-target">15</span>%</div>
                                <div class="goal-progress"><div class="goal-bar" id="physic-bar" style="width:0%"></div></div>
                                <div class="goal-info"><span id="physic-pct">0%</span><span id="physic-remain"></span></div>
                            </div>
                            <div class="form-section" style="margin:0;">
                                <div class="form-title">&#128221; Record</div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="body-date"></div>
                                    <div class="form-group"><label class="form-label">Weight (kg)</label><input type="number" step="0.1" class="form-input" id="body-weight" placeholder="79.8"></div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group"><label class="form-label">Muscle (kg)</label><input type="number" step="0.1" class="form-input" id="body-muscle" placeholder="37.0"></div>
                                    <div class="form-group"><label class="form-label">Fat %</label><input type="number" step="0.1" class="form-input" id="body-fatpct" placeholder="19.2"></div>
                                </div>
                                <div class="form-group"><label class="form-label">Notes</label><input type="text" class="form-input" id="body-notes" placeholder="e.g. InBody test"></div>
                                <div class="form-actions" style="margin-top:8px;"><button class="btn btn-accent" onclick="saveBodyData()">Save &amp; Sync</button></div>
                            </div>
                        </div>
                        <!-- Before / After Photo -->
                        <div class="form-section">
                            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
                                <div class="form-title" style="margin:0;">&#128247; Before / After Comparison</div>
                                <div style="display:flex;gap:6px;align-items:center;">
                                    <span id="body-photo-count" style="font-size:10px;color:var(--text-dim);">--</span>
                                    <button class="btn btn-small" onclick="syncBodyPhotosFromDrive()">ğŸ“· Sync Drive</button>
                                </div>
                            </div>
                            <div class="physic-layout" style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:12px;">
                                <div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                        <span style="font-size:10px;font-weight:700;color:var(--text-dim);letter-spacing:1px;">BEFORE</span>
                                        <select class="form-input" id="photo-before-select" onchange="photoIdx.before=0;updatePhotoComparison()" style="padding:4px 8px;font-size:11px;max-width:150px;"></select>
                                    </div>
                                    <div id="photo-before-frame" style="aspect-ratio:3/4;background:var(--bg-input);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;" onclick="cyclePhoto('before',1)">
                                        <span style="color:var(--text-muted);font-size:12px;">No photo</span>
                                    </div>
                                    <div id="photo-before-thumbs" style="display:flex;gap:4px;margin-top:6px;justify-content:center;"></div>
                                    <div id="photo-before-stats" style="text-align:center;margin-top:4px;font-size:11px;color:var(--text-dim);"></div>
                                </div>
                                <div>
                                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
                                        <span style="font-size:10px;font-weight:700;color:var(--text-dim);letter-spacing:1px;">AFTER</span>
                                        <select class="form-input" id="photo-after-select" onchange="photoIdx.after=0;updatePhotoComparison()" style="padding:4px 8px;font-size:11px;max-width:150px;"></select>
                                    </div>
                                    <div id="photo-after-frame" style="aspect-ratio:3/4;background:var(--bg-input);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;overflow:hidden;cursor:pointer;" onclick="cyclePhoto('after',1)">
                                        <span style="color:var(--text-muted);font-size:12px;">No photo</span>
                                    </div>
                                    <div id="photo-after-thumbs" style="display:flex;gap:4px;margin-top:6px;justify-content:center;"></div>
                                    <div id="photo-after-stats" style="text-align:center;margin-top:4px;font-size:11px;color:var(--text-dim);"></div>
                                </div>
                            </div>
                            <div id="photo-delta" style="display:none;background:var(--bg-input);border:1px solid var(--border);padding:12px;text-align:center;">
                                <div style="font-size:10px;color:var(--text-dim);letter-spacing:1px;margin-bottom:4px;">PROGRESS</div>
                                <div id="photo-delta-text" style="font-size:14px;font-weight:600;"></div>
                            </div>
                            <div style="margin-top:12px;padding:10px;background:var(--bg-input);border:1px solid var(--border);font-size:11px;color:var(--text-dim);text-align:center;">
                                ğŸ“ Google Drive â†’ RayOS Moodboard â†’ <strong>Body Progress</strong> â†’ <strong>YYYYMMDD</strong> è³‡æ–™å¤¾
                            </div>
                        </div>
                        <!-- Chart -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Trend</div>
                                <div class="chart-tabs">
                                    <button class="chart-tab active" onclick="setBodyChart('fat',this)">Body Fat</button>
                                    <button class="chart-tab" onclick="setBodyChart('weight',this)">Weight</button>
                                    <button class="chart-tab" onclick="setBodyChart('muscle',this)">Muscle</button>
                                </div>
                            </div>
                            <div class="chart-wrapper"><canvas id="bodyChart"></canvas></div>
                        </div>
                        <!-- History Table -->
                        <div class="form-section">
                            <div class="form-title">&#128202; History</div>
                            <div style="max-height:360px;overflow-y:auto;">
                                <table class="monthly-table">
                                    <thead><tr><th>Date</th><th>Weight</th><th>Fat %</th><th>Muscle</th><th>BMI</th><th>Notes</th><th></th></tr></thead>
                                    <tbody id="body-history-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <!-- Body Summary Sidebar -->
                    <div class="wealth-sidebar">
                        <div class="form-section" style="margin:0;">
                            <div class="form-title" style="font-size:13px;">&#128170; Summary</div>
                            <div style="display:grid;gap:8px;font-size:12px;">
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Total Records</span><span id="body-total-records">0</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">First Record</span><span id="body-first-date">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Latest Record</span><span id="body-latest-date">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Weight Change</span><span id="body-weight-change">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Fat % Change</span><span id="body-fat-change">--</span></div>
                                <div style="display:flex;justify-content:space-between;"><span style="color:var(--text-dim);">Muscle Change</span><span id="body-muscle-change">--</span></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- DAILY -->
        <section class="section" id="daily">
            <div class="header">
                <div class="page-title">Daily</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <span class="sync-dot off" id="sync-dot"></span><button class="btn" onclick="syncDailyFromNotionDirect()">ğŸ”„ Sync Notion</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/58da82d689ed42029274234183f77bb6','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="quote-box" style="margin-bottom:20px;text-align:center;">
                    <div class="quote-text">"If you're under $1,000,000 per year, basically everyone on earth doesn't know you exist.<br><br>4hrs Promotionã€4hrs Deliveryã€4hrs Building.<br><strong style="font-size:20px;">Promote. Deliver. Build.</strong>"</div>
                    <div class="quote-author">â€” Alex Hormozi</div>
                </div>
                
                <!-- ä¸‰æ¬„ç­‰å¯¬ç­‰é«˜ -->
                <div class="daily-grid">
                    <!-- å·¦é‚Š: Today's Progress + Daily Habits -->
                    <div class="daily-column">
                        <div class="goal-card" style="margin-bottom:12px;">
                            <div class="goal-header"><span class="goal-label">Today's Progress</span><span id="daily-date" style="color:var(--text-dim);font-size:11px;"></span></div>
                            <div class="goal-value"><span id="daily-done">0</span> / <span id="daily-total">6</span></div>
                            <div class="goal-progress"><div class="goal-bar" id="daily-bar" style="width:0%"></div></div>
                        </div>
                        <div class="form-section" style="padding:16px;flex:1;">
                            <div class="form-title" style="font-size:14px;">âœ“ Daily Habits</div>
                            <div id="habits-grid" style="display:grid;grid-template-columns:repeat(2,1fr);gap:10px;">
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="trading" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ“ˆ</span><span class="habit-name" style="font-size:12px;">Trading</span><span class="habit-time">4å°æ™‚</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="advertise" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ“£</span><span class="habit-name" style="font-size:12px;">Advertise</span><span class="habit-time">2å°æ™‚</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="deliver" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ“¦</span><span class="habit-name" style="font-size:12px;">Deliver</span><span class="habit-time">2å°æ™‚</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="gym" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ’ª</span><span class="habit-name" style="font-size:12px;">Gym</span><span class="habit-time">2å°æ™‚</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="fatloss" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ¥—</span><span class="habit-name" style="font-size:12px;">Fat Loss</span><span class="habit-time">2å°æ™‚</span></label>
                                <label class="habit-item" style="padding:12px;"><input type="checkbox" class="habit-check" data-habit="ai" onchange="updateDailyProgress()"><span class="habit-icon" style="font-size:24px;">ğŸ¤–</span><span class="habit-name" style="font-size:12px;">AI</span><span class="habit-time">2å°æ™‚</span></label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ä¸­é–“: Recent Days (with sticky header) -->
                    <div class="daily-column">
                        <div class="form-section" style="padding:16px;height:100%;display:flex;flex-direction:column;">
                            <div class="form-title" style="font-size:14px;">ğŸ“Š Recent Days</div>
                            <div class="daily-history-wrapper" style="flex:1;">
                                <table id="daily-history-table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>ğŸ“ˆ</th>
                                            <th>ğŸ“£</th>
                                            <th>ğŸ“¦</th>
                                            <th>ğŸ’ª</th>
                                            <th>ğŸ¥—</th>
                                            <th>ğŸ¤–</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <tbody id="daily-history-body"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <!-- å³é‚Š: Google Calendar -->
                    <div class="daily-column">
                        <div class="form-section" style="padding:12px;height:100%;display:flex;flex-direction:column;">
                            <div class="form-title" style="font-size:14px;">ğŸ“… Calendar</div>
                            <iframe src="https://calendar.google.com/calendar/embed?src=david86726%40gmail.com&showTitle=0&showNav=0&showPrint=0&showTabs=0&showCalendars=0&showTz=0&bgcolor=%23000000&ctz=Asia%2FTaipei&mode=MONTH" style="border:none;width:100%;flex:1;min-height:400px;filter:invert(0.9) hue-rotate(180deg);"></iframe>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- IDEAS -->
        <section class="section" id="ideas">
            <div class="header">
                <div class="page-title">Ideas</div>
                <div class="header-actions">
                    <span class="sync-dot off" id="ideas-sync-dot"></span>
                    <button class="btn" onclick="syncIdeasFromNotionDirect()">Sync Notion</button>
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/ed035c908cc04b7b999ef0c023557add','_blank')">Notion</button>
                </div>
            </div>
            <div class="content">
                <div class="form-section">
                    <div class="form-title">Quick Capture</div>
                    <div class="form-row">
                        <div class="form-group" style="flex:2;"><label class="form-label">Idea</label><input type="text" class="form-input" id="idea-text" placeholder="Type your idea..." onkeypress="if(event.key==='Enter')saveIdea()"></div>
                        <div class="form-group"><label class="form-label">Type</label><select class="form-input" id="idea-type"><option value="ğŸ’° è³£éŒ¢é»å­">ğŸ’° è³£éŒ¢é»å­</option><option value="ğŸ“¹ å½±ç‰‡é»å­">ğŸ“¹ å½±ç‰‡é»å­</option><option value="ğŸ› ï¸ å·¥å…·/è‡ªå‹•åŒ–">ğŸ› ï¸ å·¥å…·/è‡ªå‹•åŒ–</option><option value="ğŸ“ å…§å®¹é»å­">ğŸ“ å…§å®¹é»å­</option><option value="ğŸŒŸ äººç”Ÿç›®æ¨™">ğŸŒŸ äººç”Ÿç›®æ¨™</option><option value="ğŸ¤” å…¶ä»–">ğŸ¤” å…¶ä»–</option></select></div>
                        <div class="form-group"><label class="form-label">Priority</label><select class="form-input" id="idea-priority"><option value="ğŸ”¥ é«˜">ğŸ”¥ é«˜</option><option value="â­ ä¸­" selected>â­ ä¸­</option><option value="ğŸ“Œ ä½">ğŸ“Œ ä½</option></select></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group" style="flex:1;"><label class="form-label">Notes</label><input type="text" class="form-input" id="idea-notes" placeholder="Optional notes..."></div>
                    </div>
                    <div class="form-actions"><button class="btn btn-accent" onclick="saveIdea()">Save</button></div>
                </div>
                <div style="display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center;">
                    <button class="btn ideas-filter-btn active" data-filter="all" onclick="setIdeasFilter('all')">All</button>
                    <button class="btn ideas-filter-btn" data-filter="new" onclick="setIdeasFilter('new')">ğŸ’¡ New</button>
                    <button class="btn ideas-filter-btn" data-filter="research" onclick="setIdeasFilter('research')">ğŸ” Research</button>
                    <button class="btn ideas-filter-btn" data-filter="active" onclick="setIdeasFilter('active')">ğŸš€ Active</button>
                    <button class="btn ideas-filter-btn" data-filter="done" onclick="setIdeasFilter('done')">âœ… Done</button>
                    <div id="ideas-stats" style="margin-left:auto;font-size:12px;color:var(--text-muted);display:flex;gap:12px;"></div>
                </div>
                <div id="ideas-list"></div>
            </div>
        </section>

        <!-- AI LIFE COACH -->
        <section class="section" id="lifecoach">
            <div class="header">
                <div class="page-title">AI Life Coach</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <span class="ai-model-badge" style="font-size:11px;color:var(--text-dim);"></span>
                </div>
            </div>
            <div class="content">
                <div class="form-section" style="margin-bottom:16px;padding:16px;">
                    <div class="form-title">ğŸ“Š Life Overview</div>
                    <div id="life-overview" class="stats-row"></div>
                </div>
                <div class="ai-panel" style="border-radius:12px;">
                    <div class="ai-header">
                        <div class="ai-icon">ğŸ§ </div>
                        <div class="ai-title">AI Life Coach</div>
                        <span class="ai-model-badge"></span>
                    </div>
                    <div class="ai-content" style="max-height:500px;">
                        <div class="ai-suggestion" id="life-ai-suggestion">Loading...</div>
                    </div>
                    <div class="ai-chat">
                        <div class="ai-input-wrap">
                            <input type="text" class="ai-input" id="life-ai-input" placeholder="å•ä»»ä½•äººç”Ÿå•é¡Œ... æˆ‘æœƒåƒè€ƒä½ æ‰€æœ‰çš„æ•¸æ“šå’Œå­¸ç¿’ç´€éŒ„">
                            <button class="ai-send" onclick="askLifeAI()">â†’</button>
                        </div>
                    </div>
                </div>
                <div class="form-section" style="margin-top:16px;padding:16px;">
                    <div class="form-title">ğŸ“š Video Knowledge Base</div>
                    <div id="video-knowledge-summary" style="font-size:12px;color:var(--text-muted);">è¼‰å…¥ä¸­...</div>
                </div>
            </div>
        </section>

        <!-- INFORMATION -->
        <section class="section" id="information">
            <div class="header">
                <div class="page-title">Information</div>
                <div class="header-actions">
                    <button class="btn" onclick="go('dashboard')">â† Back</button>
                    <button class="btn" onclick="window.open('https://youtube-lab.vercel.app/','_blank')">Open in New Tab â†—</button>
                    <button class="btn btn-accent" onclick="window.open('https://www.notion.so/76fb8600ae9649bcb6c475f75f0ec818','_blank')">Notion</button>
                </div>
            </div>
            <div class="content" style="padding:0;height:calc(100vh - 80px);">
                <iframe src="https://youtube-lab.vercel.app/" style="width:100%;height:100%;border:none;"></iframe>
            </div>
        </section>
    </main>

    <div class="toast" id="toast">Saved</div>

    <!-- MODALS -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal">
            <div class="modal-title">Settings</div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Notion API Tokenï¼ˆç›´æ¥åŒæ­¥ï¼Œæ¨è–¦ï¼‰</label>
                <input type="password" class="form-input" id="notion-token" placeholder="ntn_xxxxx...">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">å–å¾—æ–¹å¼ï¼š<a href="https://www.notion.so/my-integrations" target="_blank" style="color:var(--accent);">notion.so/my-integrations</a> â†’ å»ºç«‹ Integration â†’ è¤‡è£½ Token â†’ è¨˜å¾—åœ¨è³‡æ–™åº«é€£æ¥ Integration</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Notion åŒæ­¥ç‹€æ…‹</label>
                <div id="notion-direct-status" style="font-size:12px;color:var(--text-dim);padding:8px 0;">æœªè¨­å®š</div>
                <button class="btn btn-small" onclick="testNotionDirect()" style="margin-top:4px;">ğŸ” æ¸¬è©¦ Notion é€£ç·š</button>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">n8n Webhook URLï¼ˆé€²éšï¼Œå¯é¸ï¼‰</label>
                <input type="text" class="form-input" id="n8n-webhook" placeholder="https://your-n8n.com/webhook/rayos-sync">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">è‹¥ä¸ä½¿ç”¨ Notion Tokenï¼Œå¯ç”¨ n8n ä¸­è½‰ã€‚æœ‰ Notion Token æ™‚æ­¤æ¬„å¯ç•™ç©º</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">n8n åŒæ­¥ç‹€æ…‹</label>
                <div id="worker-status" style="font-size:12px;color:var(--text-dim);padding:8px 0;">æœªè¨­å®š</div>
                <button class="btn btn-small" onclick="testN8nConnection()" style="margin-top:4px;">ğŸ” Test n8n</button>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">Anthropic API Key (Claude AI Coach)</label>
                <input type="password" class="form-input" id="anthropic-key" placeholder="sk-ant-...">
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">å–å¾—æ–¹å¼ï¼š<a href="https://console.anthropic.com/settings/keys" target="_blank" style="color:var(--accent);">console.anthropic.com</a> â†’ API Keys</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">AI Modelï¼ˆæ¨¡å‹é¸æ“‡ï¼‰</label>
                <select class="form-input" id="ai-model">
                    <option value="claude-haiku-4-5-20251001">Haiku 4.5 â€” æœ€å¿«ã€æœ€çœ ğŸ’°</option>
                    <option value="claude-sonnet-4-20250514" selected>Sonnet 4 â€” å‡è¡¡æ¨è–¦ âš¡</option>
                    <option value="claude-sonnet-4-5-20250514">Sonnet 4.5 â€” æ›´å¼·æ¨ç† ğŸ§ </option>
                </select>
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">Haiku â‰ˆ Sonnet çš„ 1/10 åƒ¹æ ¼ï¼Œæ—¥å¸¸è¿½è¹¤å»ºè­°å¾ˆå¤ ç”¨</div>
            </div>
            <div class="form-group" style="margin-bottom:16px;">
                <label class="form-label">ğŸ¯ Personal Profile & Goalsï¼ˆAI æœƒè®€å–é€™æ®µä¾†äº†è§£ä½ ï¼‰</label>
                <textarea class="form-input" id="ai-profile" rows="6" placeholder="ç¯„ä¾‹ï¼š
æˆ‘æ˜¯ Rayï¼Œ28æ­²ï¼Œä½åœ¨å°ä¸­ã€‚
2026 ç›®æ¨™ï¼š
- è³‡ç”¢é”åˆ° 650 è¬ TWD
- é«”è„‚é™åˆ° 15% ä»¥ä¸‹ï¼Œè‚Œè‚‰é‡ç¶­æŒ 37kg+
- ç¨‹å¼äº¤æ˜“å¹´åŒ–å ±é…¬ > 50%
- Skool ç¤¾ç¾¤ä»˜è²»æœƒå“¡é” 100 äºº
- æ¯å¤©å …æŒ 6 å€‹ç¿’æ…£

æˆ‘çš„æŒ‘æˆ°ï¼šå®¹æ˜“åœ¨é€±æœ«é¬†æ‡ˆï¼Œäº¤æ˜“å®¹æ˜“è¿½é«˜
æˆ‘å¸Œæœ› AIï¼šç›´æ¥ã€ä¸è¦å®¢å¥—ã€ç”¨æ•¸æ“šèªªè©±"></textarea>
                <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">å¯«ä¸‹ä½ çš„ç›®æ¨™ã€æŒ‘æˆ°ã€åå¥½ â€” AI Coach æœƒæ ¹æ“šé€™äº› + ä½ çš„å¯¦éš›æ•¸æ“šçµ¦å»ºè­°</div>
            </div>
            <div style="border-top:1px solid var(--border);padding-top:16px;margin-bottom:16px;">
                <div class="form-title" style="font-size:14px;">ğŸ“² è·¨è£ç½®åŒæ­¥</div>
                <p style="font-size:11px;color:var(--text-dim);margin-bottom:12px;">åŒ¯å‡ºè¨­å®šç¢¼ï¼Œåœ¨å…¶ä»–è£ç½®è²¼ä¸Šå³å¯åŒæ­¥æ‰€æœ‰ API Key å’Œè¨­å®š</p>
                <button class="btn btn-accent" onclick="exportSettingsQR()" style="width:100%;margin-bottom:8px;">ğŸ“¤ åŒ¯å‡ºè¨­å®š</button>
                <div style="display:flex;gap:8px;">
                    <input type="text" class="form-input" id="import-code-input" placeholder="è²¼ä¸Šè¨­å®šç¢¼..." style="flex:1;font-size:11px;">
                    <button class="btn" onclick="importSettingsFromPaste()">ğŸ“¥ åŒ¯å…¥</button>
                </div>
            </div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">Data</label><button class="btn btn-danger" onclick="resetData()" style="width:100%;margin-top:6px;">ğŸ”„ Reset to Demo Data</button></div>
            <div style="border-top:1px solid var(--border);padding-top:16px;margin-bottom:16px;">
                <div class="form-title" style="font-size:14px;">ğŸ–¼ï¸ Moodboard â€” Google Drive</div>
                <div class="form-group" style="margin-bottom:12px;">
                    <label class="form-label">Google Apps Script URL</label>
                    <input type="text" class="form-input" id="drive-script-url" placeholder="https://script.google.com/macros/s/xxx/exec">
                    <div style="font-size:10px;color:var(--text-muted);margin-top:4px;">è²¼ä¸Šéƒ¨ç½²å¥½çš„ Apps Script URLï¼ŒMoodboard æœƒè‡ªå‹•å¾ Google Drive æŠ“åœ–</div>
                </div>
                <details style="margin-bottom:12px;">
                    <summary style="font-size:11px;color:var(--accent);cursor:pointer;margin-bottom:8px;">ğŸ“– è¨­å®šæ•™å­¸ï¼ˆåªéœ€åšä¸€æ¬¡ï¼‰</summary>
                    <div style="font-size:11px;color:var(--text-dim);line-height:1.8;padding:12px;background:var(--bg-input);border:1px solid var(--border);">
                        <strong>Step 1ï¼šå»ºç«‹ Google Drive è³‡æ–™å¤¾</strong><br>
                        å»ºä¸€å€‹è³‡æ–™å¤¾å« <code style="color:var(--accent);">RayOS Moodboard</code><br>
                        è£¡é¢å»ºå­è³‡æ–™å¤¾ï¼šCars, Fitness, Nature, Trading, Wealth, Food, Architecture, Lifestyle ...<br>
                        ç›´æ¥æŠŠæ‰‹æ©Ÿç…§ç‰‡ä¸Ÿé€²å°æ‡‰è³‡æ–™å¤¾å°±å¥½ï¼<br><br>
                        <strong>Step 2ï¼šåˆ†äº«è³‡æ–™å¤¾</strong><br>
                        å³éµä¸»è³‡æ–™å¤¾ â†’ å…±ç”¨ â†’ ã€ŒçŸ¥é“é€£çµçš„äººéƒ½èƒ½æŸ¥çœ‹ã€<br><br>
                        <strong>Step 3ï¼šå»ºç«‹ Apps Script</strong><br>
                        å» <a href="https://script.google.com" target="_blank" style="color:var(--accent);">script.google.com</a> â†’ æ–°å»ºå°ˆæ¡ˆ<br>
                        æŠŠä¸‹é¢çš„ç¨‹å¼ç¢¼å…¨éƒ¨è²¼ä¸Šå»ï¼ˆå–ä»£åŸæœ¬çš„ï¼‰<br><br>
                        <strong>Step 4ï¼šéƒ¨ç½²</strong><br>
                        é»å³ä¸Šã€Œéƒ¨ç½²ã€â†’ã€Œæ–°å¢éƒ¨ç½²ã€â†’ é¡å‹é¸ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€<br>
                        åŸ·è¡Œèº«åˆ†ï¼š<code style="color:var(--accent);">æˆ‘</code>ã€€å­˜å–æ¬Šé™ï¼š<code style="color:var(--accent);">æ‰€æœ‰äºº</code><br>
                        è¤‡è£½ç”¢ç”Ÿçš„ URL è²¼åˆ°ä¸Šé¢æ¬„ä½<br><br>
                        <strong>Apps Script ç¨‹å¼ç¢¼ï¼š</strong><br>
                        <button class="btn btn-small" onclick="copyDriveScript()" style="margin:4px 0;">ğŸ“‹ è¤‡è£½ç¨‹å¼ç¢¼</button>
                        <pre id="drive-script-code" style="font-size:10px;color:var(--text-dim);white-space:pre-wrap;margin-top:8px;padding:8px;background:var(--bg);border:1px solid var(--border);max-height:200px;overflow-y:auto;">function doGet(e) {
  var FOLDER_ID = 'YOUR_FOLDER_ID_HERE';
  var folder = DriveApp.getFolderById(FOLDER_ID);
  var images = [];
  var bodyProgress = {};  // { "2026-02-06": [url1, url2], ... }
  
  var subs = folder.getFolders();
  while (subs.hasNext()) {
    var sub = subs.next();
    var cat = sub.getName();
    
    // Body Progress: scan date subfolders
    if (cat === 'Body Progress') {
      var dateFolders = sub.getFolders();
      while (dateFolders.hasNext()) {
        var dateFolder = dateFolders.next();
        var dateKey = dateFolder.getName(); // e.g. "2026-02-06"
        bodyProgress[dateKey] = [];
        var bFiles = dateFolder.getFiles();
        while (bFiles.hasNext()) {
          var bf = bFiles.next();
          if (bf.getMimeType().indexOf('image') === 0) {
            bodyProgress[dateKey].push(
              'https://lh3.googleusercontent.com/d/' + bf.getId() + '=s1200'
            );
          }
        }
      }
      continue; // skip adding to moodboard
    }
    
    // Normal moodboard category
    var files = sub.getFiles();
    while (files.hasNext()) {
      var f = files.next();
      if (f.getMimeType().indexOf('image') === 0) {
        images.push({
          url: 'https://lh3.googleusercontent.com/d/' + f.getId() + '=s1200',
          category: cat,
          name: f.getName()
        });
      }
    }
  }
  
  var rootFiles = folder.getFiles();
  while (rootFiles.hasNext()) {
    var f = rootFiles.next();
    if (f.getMimeType().indexOf('image') === 0) {
      images.push({
        url: 'https://lh3.googleusercontent.com/d/' + f.getId() + '=s1200',
        category: 'Other',
        name: f.getName()
      });
    }
  }
  
  return ContentService
    .createTextOutput(JSON.stringify({
      images: images,
      bodyProgress: bodyProgress,
      count: images.length
    }))
    .setMimeType(ContentService.MimeType.JSON);
}</pre>
                    </div>
                </details>
                <div style="display:flex;gap:8px;align-items:center;">
                    <button class="btn btn-small" onclick="testDriveConnection()">ğŸ” æ¸¬è©¦é€£ç·š</button>
                    <button class="btn btn-small" onclick="syncMoodboardFromDrive()">ğŸ”„ æ‰‹å‹•åŒæ­¥</button>
                    <span id="drive-status" style="font-size:11px;color:var(--text-dim);">æœªè¨­å®š</span>
                </div>
            </div>
            <div class="form-actions"><button class="btn" onclick="hideModal('settings-modal')">Cancel</button><button class="btn btn-accent" onclick="saveSettings()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="account-modal">
        <div class="modal" style="max-width:600px;">
            <div class="modal-title">Manage Accounts</div>
            <div id="account-manager-list" style="max-height:300px;overflow-y:auto;margin-bottom:16px;"></div>
            <div class="form-section" style="margin:0;">
                <div class="form-title">Add New Account</div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Name</label><input type="text" class="form-input" id="new-account-name" placeholder="Account name"></div>
                    <div class="form-group"><label class="form-label">Platform</label><input type="text" class="form-input" id="new-account-platform" placeholder="Bank"></div>
                </div>
                <div class="form-row">
                    <div class="form-group"><label class="form-label">Category</label><select class="form-input" id="new-account-category"><option value="å‚™ç”¨é‡‘">ğŸ’µ å‚™ç”¨é‡‘</option><option value="æ´»æœŸå­˜æ¬¾">ğŸ¦ æ´»æœŸå­˜æ¬¾</option><option value="è‚¡ç¥¨ETF">ğŸ“ˆ è‚¡ç¥¨/ETF</option><option value="åŠ å¯†è²¨å¹£">ğŸª™ åŠ å¯†è²¨å¹£</option><option value="å‚µå‹™">ğŸ’³ å‚µå‹™</option></select></div>
                    <div class="form-group"><label class="form-label">Currency</label><select class="form-input" id="new-account-currency"><option value="TWD">TWD</option><option value="USD">USD</option><option value="USDT">USDT</option></select></div>
                </div>
                <div class="form-actions"><button class="btn btn-accent" onclick="addAccount()">Add</button></div>
            </div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('account-modal')">Close</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="quote-modal">
        <div class="modal">
            <div class="modal-title">Edit Quote</div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Quote</label><textarea class="form-input" id="quote-text-input" rows="3"></textarea></div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">Author</label><input type="text" class="form-input" id="quote-author-input"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('quote-modal')">Cancel</button><button class="btn btn-accent" onclick="saveQuote()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="goal-modal">
        <div class="modal">
            <div class="modal-title">Edit Wealth Goal</div>
            <div class="form-group" style="margin-bottom:16px;"><label class="form-label">2026 Target (TWD)</label><input type="number" class="form-input" id="wealth-goal-input" placeholder="6500000"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('goal-modal')">Cancel</button><button class="btn btn-accent" onclick="saveGoal()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="physic-goal-modal">
        <div class="modal">
            <div class="modal-title">Edit Body Fat Goal</div>
            <div class="form-row">
                <div class="form-group"><label class="form-label">Start Fat %</label><input type="number" step="0.1" class="form-input" id="physic-start-input" placeholder="21"></div>
                <div class="form-group"><label class="form-label">Target Fat %</label><input type="number" step="0.1" class="form-input" id="physic-target-input" placeholder="15"></div>
            </div>
            <div class="form-group" style="margin-top:12px;"><label class="form-label">Height (cm) for BMI</label><input type="number" step="0.1" class="form-input" id="physic-height-input" placeholder="175"></div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('physic-goal-modal')">Cancel</button><button class="btn btn-accent" onclick="savePhysicGoal()">Save</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="photo-manager-modal">
        <div class="modal" style="max-width:600px;">
            <div class="modal-title">Manage Photos</div>
            <div id="photo-manager-list" style="max-height:400px;overflow-y:auto;"></div>
            <div class="form-actions" style="margin-top:16px;"><button class="btn" onclick="hideModal('photo-manager-modal')">Close</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="business-modal">
        <div class="modal">
            <div class="modal-title">Add Business</div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Name</label><input type="text" class="form-input" id="new-biz-name" placeholder="Business name"></div>
            <div class="form-group" style="margin-bottom:12px;"><label class="form-label">Icon</label><input type="text" class="form-input" id="new-biz-icon" placeholder="ğŸ¢"></div>
            <div class="form-actions"><button class="btn" onclick="hideModal('business-modal')">Cancel</button><button class="btn btn-accent" onclick="addBusiness()">Add</button></div>
        </div>
    </div>


    <div class="modal-overlay" id="qr-export-modal">
        <div class="modal" style="max-width:420px;text-align:center;">
            <div class="modal-title">ğŸ“² åŒ¯å‡ºè¨­å®š</div>
            <p style="font-size:12px;color:var(--text-dim);margin-bottom:16px;">ç”¨æ‰‹æ©Ÿæƒæ QR Codeï¼Œå³å¯è‡ªå‹•åŒ¯å…¥æ‰€æœ‰è¨­å®š</p>
            <div id="qr-code-container" style="display:inline-block;padding:16px;background:#fff;margin-bottom:16px;"></div>
            <div style="font-size:10px;color:var(--text-muted);margin-bottom:12px;" id="qr-payload-info"></div>
            <button class="btn" onclick="copySettingsCode()" style="width:100%;margin-bottom:12px;">ğŸ“‹ è¤‡è£½è¨­å®šç¢¼ï¼ˆè²¼åˆ° PWA åŒ¯å…¥ï¼‰</button>
            <div class="form-actions" style="justify-content:center;"><button class="btn" onclick="hideModal('qr-export-modal')">é—œé–‰</button></div>
        </div>
    </div>

    <div class="modal-overlay" id="import-success-modal">
        <div class="modal" style="max-width:420px;text-align:center;">
            <div class="modal-title">âœ… è¨­å®šå·²åŒ¯å…¥</div>
            <p style="font-size:13px;color:var(--text-dim);margin-bottom:8px;">ä»¥ä¸‹è¨­å®šå·²è‡ªå‹•å„²å­˜åˆ°æ­¤è£ç½®ï¼š</p>
            <div id="import-result-list" style="text-align:left;font-size:12px;color:var(--text-dim);margin-bottom:16px;padding:12px;background:var(--bg-input);border:1px solid var(--border);"></div>
            <div class="form-actions" style="justify-content:center;"><button class="btn btn-accent" onclick="hideModal('import-success-modal');location.reload();">ç¢ºèªä¸¦é‡æ–°è¼‰å…¥</button></div>
        </div>
    </div>

    <!-- JS Modules (order matters for variable dependencies) -->
    <script src="js/data.js"></script>
    <script src="js/config.js"></script>
    <script src="js/state.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/notion-sync.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/wealth.js"></script>
    <script src="js/ai-engine.js"></script>
    <script src="js/business.js"></script>
    <script src="js/trading.js"></script>
    <script src="js/physic.js"></script>
    <script src="js/daily.js"></script>
    <script src="js/ideas.js"></script>
    <script src="js/init.js"></script>
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then(reg => console.log('[RayOS] SW registered:', reg.scope))
                    .catch(err => console.warn('[RayOS] SW registration failed:', err));
            });
        }
    </script>
</body>
</html>
