{
  "name": "Ray AI ç®¡å®¶ â€” æ¯æ—¥è³‡è¨Šæ•´ç†",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "cronExpression",
              "expression": "0 8 * * *"
            }
          ]
        }
      },
      "id": "schedule-001",
      "name": "Every Day 8AM",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [0, 300]
    },
    {
      "parameters": {
        "url": "https://hnrss.org/newest?q=AI+LLM+Claude&points=50",
        "options": { "response": { "response": { "responseFormat": "text" } } }
      },
      "id": "rss-ai-hn",
      "name": "RSS: HN AI",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [240, 100]
    },
    {
      "parameters": {
        "url": "https://news.google.com/rss/search?q=AI%E4%BA%BA%E5%B7%A5%E6%99%BA%E6%85%A7+Claude+GPT&hl=zh-TW&gl=TW&ceid=TW:zh-Hant",
        "options": { "response": { "response": { "responseFormat": "text" } } }
      },
      "id": "rss-ai-google",
      "name": "RSS: Google AI News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [240, 250]
    },
    {
      "parameters": {
        "url": "https://news.google.com/rss/search?q=prop+firm+funded+trader+algorithmic+trading&hl=en&gl=US",
        "options": { "response": { "response": { "responseFormat": "text" } } }
      },
      "id": "rss-trading",
      "name": "RSS: Trading News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [240, 400]
    },
    {
      "parameters": {
        "url": "https://news.google.com/rss/search?q=%E5%81%A5%E8%BA%AB+%E6%B8%9B%E8%84%82+%E9%AB%94%E8%84%82&hl=zh-TW&gl=TW&ceid=TW:zh-Hant",
        "options": { "response": { "response": { "responseFormat": "text" } } }
      },
      "id": "rss-fitness",
      "name": "RSS: Fitness News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [240, 550]
    },
    {
      "parameters": {
        "url": "https://news.google.com/rss/search?q=Skool+creator+economy+online+business&hl=en&gl=US",
        "options": { "response": { "response": { "responseFormat": "text" } } }
      },
      "id": "rss-biz",
      "name": "RSS: Business News",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [240, 700]
    },
    {
      "parameters": {
        "jsCode": "// Collect all RSS responses and extract items\nconst feeds = [\n  { category: 'ğŸ¤– AI & Tech', data: $('RSS: HN AI').first().json.data },\n  { category: 'ğŸ¤– AI & Tech', data: $('RSS: Google AI News').first().json.data },\n  { category: 'ğŸ“ˆ äº¤æ˜“ & Prop Firm', data: $('RSS: Trading News').first().json.data },\n  { category: 'ğŸ’ª å¥èº« & èº«é«”', data: $('RSS: Fitness News').first().json.data },\n  { category: 'ğŸš€ å‰µæ¥­ & å•†æ¥­', data: $('RSS: Business News').first().json.data }\n];\n\n// Simple XML item extraction (RSS 2.0)\nfunction extractItems(xml, category, maxItems = 5) {\n  if (!xml) return [];\n  const items = [];\n  const regex = /<item>(.*?)<\\/item>/gs;\n  let match;\n  while ((match = regex.exec(xml)) !== null && items.length < maxItems) {\n    const titleMatch = match[1].match(/<title>(?:<!\\[CDATA\\[)?(.*?)(?:\\]\\]>)?<\\/title>/);\n    const linkMatch = match[1].match(/<link>(?:<!\\[CDATA\\[)?(.*?)(?:\\]\\]>)?<\\/link>/);\n    const descMatch = match[1].match(/<description>(?:<!\\[CDATA\\[)?(.*?)(?:\\]\\]>)?<\\/description>/s);\n    if (titleMatch) {\n      items.push({\n        category,\n        title: titleMatch[1].replace(/<[^>]*>/g, '').trim(),\n        link: linkMatch ? linkMatch[1].trim() : '',\n        description: descMatch ? descMatch[1].replace(/<[^>]*>/g, '').substring(0, 200).trim() : ''\n      });\n    }\n  }\n  return items;\n}\n\nlet allItems = [];\nfor (const feed of feeds) {\n  allItems = allItems.concat(extractItems(feed.data, feed.category));\n}\n\n// Build a text summary for Claude\nlet feedText = '';\nlet currentCat = '';\nfor (const item of allItems) {\n  if (item.category !== currentCat) {\n    currentCat = item.category;\n    feedText += `\\n\\n--- ${item.category} ---\\n`;\n  }\n  feedText += `- ${item.title}\\n  ${item.description}\\n  ${item.link}\\n`;\n}\n\nreturn [{ json: { feedText, itemCount: allItems.length } }];"
      },
      "id": "code-merge-001",
      "name": "Merge & Format Feeds",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [520, 400]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.anthropic.com/v1/messages",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            { "name": "x-api-key", "value": "={{ $credentials.httpHeaderAuth.value }}" },
            { "name": "anthropic-version", "value": "2023-06-01" },
            { "name": "content-type", "value": "application/json" }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ JSON.stringify({ model: 'claude-sonnet-4-20250514', max_tokens: 2000, system: 'ä½ æ˜¯ Ray çš„ AI ç®¡å®¶ã€‚ä½ çš„ä»»å‹™æ˜¯æ•´ç†ä»Šæ—¥æ–°èæ‘˜è¦ï¼Œç”¨ç¹é«”ä¸­æ–‡å›è¦†ã€‚\\n\\nRay çš„èƒŒæ™¯ï¼š\\n- ç¨‹å¼äº¤æ˜“è€…ï¼ˆProp Firm + è‡ªæœ‰è³‡é‡‘ï¼‰\\n- æ­£åœ¨ç¶“ç‡Ÿ Skool ç¤¾ç¾¤å’Œ YouTube é »é“\\n- é—œæ³¨ AI è‡ªå‹•åŒ–å·¥å…·\\n- æ­£åœ¨æ¸›è„‚ï¼ˆç›®æ¨™é«”è„‚ 15%ï¼‰\\n\\næ ¼å¼è¦æ±‚ï¼š\\n\\nğŸ¤– **AI & ç§‘æŠ€**\\n1. ğŸ“° æ¨™é¡Œ â€” ä¸€å¥è©±æ‘˜è¦ï¼ˆç‚ºä»€éº¼ Ray è©²é—œæ³¨ï¼‰\\n2. ...\\n\\nğŸ“ˆ **äº¤æ˜“ & Prop Firm**\\n1. ...\\n\\nğŸ’ª **å¥èº« & èº«é«”**\\n1. ...\\n\\nğŸš€ **å‰µæ¥­ & å•†æ¥­**\\n1. ...\\n\\nğŸ’¡ **ä»Šæ—¥ç®¡å®¶å»ºè­°**\\nä¸€æ®µè©±ï¼šä»Šå¤©æœ€å€¼å¾— Ray é—œæ³¨çš„äº‹ã€å¯ä»¥ç«‹å³æ¡å–çš„è¡Œå‹•ã€‚\\n\\nè¦å‰‡ï¼š\\n- æ¯å€‹åˆ†é¡åªé¸æœ€æœ‰åƒ¹å€¼çš„ 3-5 å‰‡\\n- å¦‚æœæŸåˆ†é¡æ²’æœ‰é‡è¦æ–°èï¼Œå¯ä»¥è·³é\\n- é‡é»æ”¾åœ¨ actionable insightsï¼Œä¸æ˜¯ç´”æ–°èè½‰è¿°\\n- èªæ°£åƒä¸€å€‹è°æ˜çš„æœ‹å‹åœ¨è·Ÿä½ èŠå¤©', messages: [{ role: 'user', content: 'ä»¥ä¸‹æ˜¯ä»Šå¤©çš„æ–°è feedsï¼š\\n' + $json.feedText + '\\n\\nè«‹æ•´ç†æˆæ¯æ—¥æ‘˜è¦ã€‚' }] }) }}",
        "options": {
          "response": { "response": { "responseFormat": "json" } }
        }
      },
      "id": "claude-digest-001",
      "name": "Claude Curate Digest",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [740, 400],
      "credentials": {
        "httpHeaderAuth": {
          "id": "ANTHROPIC_CREDENTIAL_ID",
          "name": "Anthropic API Key"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "// Extract Claude response text\nconst content = $input.first().json;\nlet text = '';\nif (content.content && content.content[0] && content.content[0].text) {\n  text = content.content[0].text;\n}\n\n// Add footer\nconst today = new Date().toISOString().split('T')[0];\ntext += `\\n\\n---\\nğŸ“… ${today} | ğŸ¤– Ray AI ç®¡å®¶`;\n\nreturn [{ json: { digest: text } }];"
      },
      "id": "code-format-001",
      "name": "Format Digest",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [960, 400]
    },
    {
      "parameters": {
        "chatId": "RAY_TELEGRAM_CHAT_ID",
        "text": "={{ $json.digest }}",
        "additionalFields": {
          "parse_mode": "Markdown"
        }
      },
      "id": "tg-send-digest",
      "name": "Send Daily Digest",
      "type": "n8n-nodes-base.telegram",
      "typeVersion": 1.2,
      "position": [1180, 400],
      "credentials": {
        "telegramApi": {
          "id": "TELEGRAM_CREDENTIAL_ID",
          "name": "Ray AI ç®¡å®¶ Bot"
        }
      }
    }
  ],
  "connections": {
    "Every Day 8AM": {
      "main": [[
        { "node": "RSS: HN AI", "type": "main", "index": 0 },
        { "node": "RSS: Google AI News", "type": "main", "index": 0 },
        { "node": "RSS: Trading News", "type": "main", "index": 0 },
        { "node": "RSS: Fitness News", "type": "main", "index": 0 },
        { "node": "RSS: Business News", "type": "main", "index": 0 }
      ]]
    },
    "RSS: HN AI": {
      "main": [[{ "node": "Merge & Format Feeds", "type": "main", "index": 0 }]]
    },
    "RSS: Google AI News": {
      "main": [[{ "node": "Merge & Format Feeds", "type": "main", "index": 0 }]]
    },
    "RSS: Trading News": {
      "main": [[{ "node": "Merge & Format Feeds", "type": "main", "index": 0 }]]
    },
    "RSS: Fitness News": {
      "main": [[{ "node": "Merge & Format Feeds", "type": "main", "index": 0 }]]
    },
    "RSS: Business News": {
      "main": [[{ "node": "Merge & Format Feeds", "type": "main", "index": 0 }]]
    },
    "Merge & Format Feeds": {
      "main": [[{ "node": "Claude Curate Digest", "type": "main", "index": 0 }]]
    },
    "Claude Curate Digest": {
      "main": [[{ "node": "Format Digest", "type": "main", "index": 0 }]]
    },
    "Format Digest": {
      "main": [[{ "node": "Send Daily Digest", "type": "main", "index": 0 }]]
    }
  },
  "settings": {
    "executionOrder": "v1",
    "saveManualExecutions": true,
    "callerPolicy": "workflowsFromSameOwner",
    "timezone": "Asia/Taipei"
  },
  "staticData": null,
  "tags": [{ "name": "telegram" }, { "name": "daily-digest" }, { "name": "ai" }, { "name": "rss" }],
  "triggerCount": 1,
  "pinData": {}
}
